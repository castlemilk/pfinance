(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{31660:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>o});var s=a(95155),n=a(12115),r=a(16203),l=a(56104);let i=(0,n.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0);(0,n.useEffect)(()=>(0,r.hg)(l.j,e=>{o(e),d(!1)}),[]);let u=async(e,t)=>{await (0,r.x9)(l.j,e,t)},m=async(e,t,a)=>{let s=await (0,r.eJ)(l.j,e,t);s.user&&await (0,r.r7)(s.user,{displayName:a})},x=async()=>{let e=new r.HF;await (0,r.df)(l.j,e)},h=async()=>{await (0,r.CI)(l.j)};return(0,s.jsx)(i.Provider,{value:{user:a,loading:c,signIn:u,signUp:m,signInWithGoogle:x,logout:h},children:t})}function c(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},40174:(e,t,a)=>{"use strict";a.d(t,{MultiUserFinanceProvider:()=>c,c:()=>d});var s=a(95155),n=a(12115),r=a(35317),l=a(56104),i=a(31660);let o=(0,n.createContext)(void 0);function c(e){let{children:t}=e,{user:a}=(0,i.A)(),[c,d]=(0,n.useState)([]),[u,m]=(0,n.useState)(null),[x,h]=(0,n.useState)([]),[p,f]=(0,n.useState)([]),[g,j]=(0,n.useState)(!1),[y,v]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!a){d([]),m(null);return}j(!0);let e=(0,r.P)((0,r.rJ)(l.db,"financeGroups"),(0,r._M)("members","array-contains",{userId:a.uid,email:a.email,displayName:a.displayName||a.email}));return(0,r.aQ)(e,e=>{d(e.docs.map(e=>{var t,a;return{id:e.id,...e.data(),createdAt:(null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate())||new Date,members:(null===(a=e.data().members)||void 0===a?void 0:a.map(e=>{var t;return{...e,joinedAt:(null===(t=e.joinedAt)||void 0===t?void 0:t.toDate())||new Date}}))||[]}})),j(!1)})},[a]),(0,n.useEffect)(()=>{if(!u){h([]);return}let e=(0,r.P)((0,r.rJ)(l.db,"groupExpenses"),(0,r._M)("groupId","==",u.id));return(0,r.aQ)(e,e=>{h(e.docs.map(e=>{var t;return{id:e.id,...e.data(),date:(null===(t=e.data().date)||void 0===t?void 0:t.toDate())||new Date}}))})},[u]),(0,n.useEffect)(()=>{if(!u){f([]);return}let e=(0,r.P)((0,r.rJ)(l.db,"groupIncomes"),(0,r._M)("groupId","==",u.id));return(0,r.aQ)(e,e=>{f(e.docs.map(e=>{var t;return{id:e.id,...e.data(),date:(null===(t=e.data().date)||void 0===t?void 0:t.toDate())||new Date}}))})},[u]);let b=async(e,t)=>{if(!a)throw Error("User must be authenticated");let s={name:e,description:t||"",members:[{userId:a.uid,email:a.email,displayName:a.displayName||a.email,role:"owner",joinedAt:(0,r.O5)()}],createdBy:a.uid,createdAt:(0,r.O5)(),settings:{currency:"USD",allowMemberInvites:!0,autoApproveExpenses:!0,defaultSplitMethod:"equal"}};return(await (0,r.gS)((0,r.rJ)(l.db,"financeGroups"),s)).id},N=async function(e,t){var s;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"member";if(!a)throw Error("User must be authenticated");let i={userId:t,email:t,displayName:t,role:n,joinedAt:(0,r.O5)()},o=(0,r.H9)(l.db,"financeGroups",e);await (0,r.mZ)(o,{members:[...(null===(s=c.find(t=>t.id===e))||void 0===s?void 0:s.members)||[],i]})},w=async e=>{if(!a)throw Error("User must be authenticated");let t=c.find(t=>t.id===e);if(!t)return;let s=t.members.filter(e=>e.userId!==a.uid);0===s.length?await (0,r.kd)((0,r.H9)(l.db,"financeGroups",e)):await (0,r.mZ)((0,r.H9)(l.db,"financeGroups",e),{members:s})},S=async(e,t)=>{let a=(0,r.H9)(l.db,"financeGroups",e);await (0,r.mZ)(a,{settings:t})},k=async(e,t,s)=>{if(!a)throw Error("User must be authenticated");let n={...t,groupId:e,addedBy:a.uid,date:(0,r.O5)(),splits:s.map(e=>({...e,paid:!1})),approved:!0,approvedBy:a.uid};return(await (0,r.gS)((0,r.rJ)(l.db,"groupExpenses"),n)).id},F=async(e,t)=>{let a=(0,r.H9)(l.db,"groupExpenses",e);await (0,r.mZ)(a,t)},C=async e=>{await (0,r.kd)((0,r.H9)(l.db,"groupExpenses",e))},A=async(e,t)=>{let a=x.find(t=>t.id===e);if(!a)return;let s=a.splits.map(e=>e.userId===t?{...e,paid:!0,paidAt:new Date}:e);await F(e,{splits:s})},E=async(e,t)=>{if(!a)throw Error("User must be authenticated");let s={...t,groupId:e,addedBy:a.uid,date:(0,r.O5)()};return(await (0,r.gS)((0,r.rJ)(l.db,"groupIncomes"),s)).id},T=async(e,t)=>{let a=(0,r.H9)(l.db,"groupIncomes",e);await (0,r.mZ)(a,t)},D=async e=>{await (0,r.kd)((0,r.H9)(l.db,"groupIncomes",e))};return(0,s.jsx)(o.Provider,{value:{groups:c,activeGroup:u,setActiveGroup:m,createGroup:b,inviteUserToGroup:N,leaveGroup:w,updateGroupSettings:S,groupExpenses:x,addGroupExpense:k,updateGroupExpense:F,deleteGroupExpense:C,markExpenseAsPaid:A,groupIncomes:p,addGroupIncome:E,updateGroupIncome:T,deleteGroupIncome:D,getGroupExpenseSummary:e=>x.filter(t=>t.groupId===e).reduce((e,t)=>(e[t.category]=(e[t.category]||0)+t.amount,e),{}),getUserOwedAmount:(e,t)=>x.filter(a=>a.groupId===e&&a.addedBy===t).reduce((e,a)=>e+a.splits.filter(e=>e.userId!==t&&!e.paid).reduce((e,t)=>e+t.amount,0),0),getUserOwesAmount:(e,t)=>x.filter(a=>a.groupId===e&&a.addedBy!==t).reduce((e,a)=>{let s=a.splits.find(e=>e.userId===t&&!e.paid);return e+((null==s?void 0:s.amount)||0)},0),loading:g,error:y},children:t})}function d(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useMultiUserFinance must be used within a MultiUserFinanceProvider");return e}},56104:(e,t,a)=>{"use strict";a.d(t,{db:()=>o,j:()=>i});var s=a(23915),n=a(16203),r=a(35317);let l=(0,s.Wp)({apiKey:"AIzaSyBbSWgNm4JW3wk_QyzVrUgfTdNruWMI2IM",authDomain:"pfinance-app-1748773335.firebaseapp.com",projectId:"pfinance-app-1748773335",storageBucket:"pfinance-app-1748773335.firebasestorage.app",messagingSenderId:"859800863588",appId:"1:859800863588:web:37e07faef9c57b0329f071"}),i=(0,n.xI)(l),o=(0,r.aU)(l)},75338:(e,t,a)=>{"use strict";a.d(t,{JE:()=>i,PV:()=>l});let s={name:"Australian",currency:"AUD",brackets:[{min:0,max:18200,rate:0},{min:18201,max:45e3,rate:19},{min:45001,max:12e4,rate:32.5},{min:120001,max:18e4,rate:37},{min:180001,max:null,rate:45}],deductionRate:45},n={name:"United Kingdom",currency:"GBP",brackets:[{min:0,max:12570,rate:0},{min:12571,max:50270,rate:20},{min:50271,max:125140,rate:40},{min:125141,max:null,rate:45}],deductionRate:40},r={name:"Simple Flat Rate",currency:"USD",brackets:[{min:0,max:null,rate:20}]};function l(e){switch(e){case"australia":return s;case"uk":return n;default:return r}}function i(e,t){if(e<=0)return 0;let a=[...t].sort((e,t)=>e.min-t.min),s=a.find(t=>e>=t.min&&(null===t.max||e<=t.max));if(!s)return 0;if(void 0!==s.baseAmount)return s.baseAmount+(e-s.min)*(s.rate/100);let n=0,r=e;for(let t=0;t<a.length;t++){let s=a[t];if(s.min>e)break;t<a.length-1&&a[t+1].min;let l=Math.min((null!==s.max?Math.min(s.max,e):e)-s.min,r);if(n+=l*(s.rate/100),(r-=l)<=0)break}return n}},78585:(e,t,a)=>{Promise.resolve().then(a.bind(a,79595)),Promise.resolve().then(a.bind(a,31660)),Promise.resolve().then(a.bind(a,80326)),Promise.resolve().then(a.bind(a,40174))},79595:(e,t,a)=>{"use strict";a.d(t,{default:()=>tQ});var s=a(95155),n=a(12115),r=a(30064),l=a(52596),i=a(39688);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.QP)((0,l.$)(t))}function c(e){let{className:t,...a}=e;return(0,s.jsx)(r.bL,{"data-slot":"tabs",className:o("flex flex-col gap-2",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)(r.B8,{"data-slot":"tabs-list",className:o("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function u(e){let{className:t,...a}=e;return(0,s.jsx)(r.l9,{"data-slot":"tabs-trigger",className:o("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/50 inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)(r.UC,{"data-slot":"tabs-content",className:o("flex-1 outline-none",t),...a})}var x=a(62177),h=a(80326),p=a(99708),f=a(74466);let g=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function j(e){let{className:t,variant:a,size:n,asChild:r=!1,...l}=e,i=r?p.DX:"button";return(0,s.jsx)(i,{"data-slot":"button",className:o(g({variant:a,size:n,className:t})),...l})}function y(e){let{className:t,type:a,...n}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:o("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}function v(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:o("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function b(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:o("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-[data-slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function N(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:o("leading-none font-semibold",t),...a})}function w(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:o("text-muted-foreground text-sm",t),...a})}function S(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:o("px-6",t),...a})}function k(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:o("flex items-center px-6 [.border-t]:pt-6",t),...a})}var F=a(40968);function C(e){let{className:t,...a}=e;return(0,s.jsx)(F.b,{"data-slot":"label",className:o("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}let A=x.Op,E=n.createContext({}),T=e=>{let{...t}=e;return(0,s.jsx)(E.Provider,{value:{name:t.name},children:(0,s.jsx)(x.xI,{...t})})},D=()=>{let e=n.useContext(E),t=n.useContext(P),{getFieldState:a}=(0,x.xW)(),s=(0,x.lN)({name:e.name}),r=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...r}},P=n.createContext({});function I(e){let{className:t,...a}=e,r=n.useId();return(0,s.jsx)(P.Provider,{value:{id:r},children:(0,s.jsx)("div",{"data-slot":"form-item",className:o("grid gap-2",t),...a})})}function z(e){let{className:t,...a}=e,{error:n,formItemId:r}=D();return(0,s.jsx)(C,{"data-slot":"form-label","data-error":!!n,className:o("data-[error=true]:text-destructive",t),htmlFor:r,...a})}function q(e){let{...t}=e,{error:a,formItemId:n,formDescriptionId:r,formMessageId:l}=D();return(0,s.jsx)(p.DX,{"data-slot":"form-control",id:n,"aria-describedby":a?"".concat(r," ").concat(l):"".concat(r),"aria-invalid":!!a,...t})}function M(e){let{className:t,...a}=e,{formDescriptionId:n}=D();return(0,s.jsx)("p",{"data-slot":"form-description",id:n,className:o("text-muted-foreground text-sm",t),...a})}function V(e){var t;let{className:a,...n}=e,{error:r,formMessageId:l}=D(),i=r?String(null!==(t=null==r?void 0:r.message)&&void 0!==t?t:""):n.children;return i?(0,s.jsx)("p",{"data-slot":"form-message",id:l,className:o("text-destructive text-sm",a),...n,children:i}):null}var O=a(31992),U=a(66474),H=a(5196),R=a(47863);function L(e){let{...t}=e;return(0,s.jsx)(O.bL,{"data-slot":"select",...t})}function B(e){let{...t}=e;return(0,s.jsx)(O.WT,{"data-slot":"select-value",...t})}function Y(e){let{className:t,size:a="default",children:n,...r}=e;return(0,s.jsxs)(O.l9,{"data-slot":"select-trigger","data-size":a,className:o("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[n,(0,s.jsx)(O.In,{asChild:!0,children:(0,s.jsx)(U.A,{className:"size-4 opacity-50"})})]})}function _(e){let{className:t,children:a,position:n="popper",...r}=e;return(0,s.jsx)(O.ZL,{children:(0,s.jsxs)(O.UC,{"data-slot":"select-content",className:o("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[(0,s.jsx)(W,{}),(0,s.jsx)(O.LM,{className:o("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(J,{})]})})}function G(e){let{className:t,children:a,...n}=e;return(0,s.jsxs)(O.q7,{"data-slot":"select-item",className:o("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(O.VF,{children:(0,s.jsx)(H.A,{className:"size-4"})})}),(0,s.jsx)(O.p4,{children:a})]})}function W(e){let{className:t,...a}=e;return(0,s.jsx)(O.PP,{"data-slot":"select-scroll-up-button",className:o("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(R.A,{className:"size-4"})})}function J(e){let{className:t,...a}=e;return(0,s.jsx)(O.wn,{"data-slot":"select-scroll-down-button",className:o("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(U.A,{className:"size-4"})})}function $(){let{addExpense:e}=(0,h.g)(),t=(0,x.mN)({defaultValues:{description:"",amount:"",category:"Food",frequency:"monthly"}}),a=["Food","Housing","Transportation","Entertainment","Healthcare","Utilities","Shopping","Education","Travel","Other"],n=["weekly","fortnightly","monthly","annually"];return(0,s.jsxs)(v,{className:"w-full",children:[(0,s.jsx)(b,{children:(0,s.jsx)(N,{children:"Add New Expense"})}),(0,s.jsx)(S,{children:(0,s.jsx)(A,{...t,children:(0,s.jsxs)("form",{onSubmit:t.handleSubmit(a=>{e(a.description,parseFloat(a.amount),a.category,a.frequency),t.reset()}),className:"space-y-4",children:[(0,s.jsx)(T,{control:t.control,name:"description",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Description"}),(0,s.jsx)(q,{children:(0,s.jsx)(y,{placeholder:"Enter expense description",...t})}),(0,s.jsx)(V,{})]})}}),(0,s.jsx)(T,{control:t.control,name:"amount",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Amount"}),(0,s.jsx)(q,{children:(0,s.jsx)(y,{type:"number",step:"0.01",min:"0",placeholder:"Enter amount",...t})}),(0,s.jsx)(V,{})]})}}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(T,{control:t.control,name:"category",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Category"}),(0,s.jsxs)(L,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(q,{children:(0,s.jsx)(Y,{children:(0,s.jsx)(B,{placeholder:"Select a category"})})}),(0,s.jsx)(_,{children:a.map(e=>(0,s.jsx)(G,{value:e,children:e},e))})]}),(0,s.jsx)(V,{})]})}}),(0,s.jsx)(T,{control:t.control,name:"frequency",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Frequency"}),(0,s.jsxs)(L,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(q,{children:(0,s.jsx)(Y,{children:(0,s.jsx)(B,{placeholder:"Select frequency"})})}),(0,s.jsx)(_,{children:n.map(e=>(0,s.jsx)(G,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,s.jsx)(V,{})]})}})]}),(0,s.jsx)(j,{type:"submit",className:"w-full",children:"Add Expense"})]})})})]})}function K(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:o("w-full caption-bottom text-sm",t),...a})})}function Z(e){let{className:t,...a}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:o("[&_tr]:border-b",t),...a})}function Q(e){let{className:t,...a}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:o("[&_tr:last-child]:border-0",t),...a})}function X(e){let{className:t,...a}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:o("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function ee(e){let{className:t,...a}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:o("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function et(e){let{className:t,...a}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:o("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function ea(e){let{className:t,...a}=e;return(0,s.jsx)("caption",{"data-slot":"table-caption",className:o("text-muted-foreground mt-4 text-sm",t),...a})}var es=a(15452),en=a(54416);function er(e){let{...t}=e;return(0,s.jsx)(es.bL,{"data-slot":"dialog",...t})}function el(e){let{...t}=e;return(0,s.jsx)(es.l9,{"data-slot":"dialog-trigger",...t})}function ei(e){let{...t}=e;return(0,s.jsx)(es.ZL,{"data-slot":"dialog-portal",...t})}function eo(e){let{className:t,...a}=e;return(0,s.jsx)(es.hJ,{"data-slot":"dialog-overlay",className:o("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function ec(e){let{className:t,children:a,...n}=e;return(0,s.jsxs)(ei,{"data-slot":"dialog-portal",children:[(0,s.jsx)(eo,{}),(0,s.jsxs)(es.UC,{"data-slot":"dialog-content",className:o("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[a,(0,s.jsxs)(es.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(en.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ed(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:o("flex flex-col gap-2 text-center sm:text-left",t),...a})}function eu(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:o("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function em(e){let{className:t,...a}=e;return(0,s.jsx)(es.hE,{"data-slot":"dialog-title",className:o("text-lg leading-none font-semibold",t),...a})}function ex(e){let{className:t,...a}=e;return(0,s.jsx)(es.VY,{"data-slot":"dialog-description",className:o("text-muted-foreground text-sm",t),...a})}var eh=a(62525),ep=a(89917);let ef=(0,f.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/70",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function eg(e){let{className:t,variant:a,asChild:n=!1,...r}=e,l=n?p.DX:"span";return(0,s.jsx)(l,{"data-slot":"badge",className:o(ef({variant:a}),t),...r})}let ej=["#0EA5E9","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#F97316","#6366F1","#14B8A6","#6B7280"],ey={weekly:"#94A3B8",fortnightly:"#A78BFA",monthly:"#2DD4BF",annually:"#4ADE80"},ev=e=>({Food:ej[0],Housing:ej[1],Transportation:ej[2],Entertainment:ej[3],Healthcare:ej[4],Utilities:ej[5],Shopping:ej[6],Education:ej[7],Travel:ej[8],Other:ej[9]})[e]||ej[9],eb=e=>ey[e]||"#CBD5E1",eN=e=>({Salary:ej[0],Freelance:ej[7],Investment:ej[2],Rental:ej[1],Business:ej[6],"Side Hustle":ej[4],Dividend:ej[5],Interest:ej[8]})[e]||ej[9];function ew(){let{expenses:e,deleteExpense:t,deleteExpenses:a,updateExpense:r}=(0,h.g)(),[l,i]=(0,n.useState)(!1),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),[m,p]=(0,n.useState)(null),[f,g]=(0,n.useState)(new Set),[w,k]=(0,n.useState)(null),[F,C]=(0,n.useState)(!1),E=(0,x.mN)({defaultValues:{description:"",amount:"",category:"Food",frequency:"monthly"}});(0,n.useEffect)(()=>{let e=e=>{"Shift"===e.key&&C(!0)},t=e=>{"Shift"===e.key&&C(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]);let D=e=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(e),P=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),M=e=>e.charAt(0).toUpperCase()+e.slice(1),O=e=>{u(e),E.reset({description:e.description,amount:e.amount.toString(),category:e.category,frequency:e.frequency}),i(!0)},U=e=>{p(e),c(!0)},H=(t,a)=>{try{if(F&&null!==w){let s=Math.min(w,a),n=Math.max(w,a),r=e.slice(s,n+1).map(e=>e.id),l=new Set([...f]),i=!f.has(t);for(let e of r)i?l.add(e):l.delete(e);g(l)}else{let e=new Set([...f]);e.has(t)?e.delete(t):e.add(t),g(e)}}catch(e){console.error("Error in handleToggleSelect:",e)}k(a)},R=["Food","Housing","Transportation","Entertainment","Healthcare","Utilities","Shopping","Education","Travel","Other"],W=["weekly","fortnightly","monthly","annually"];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(v,{className:"w-full",children:[(0,s.jsx)(b,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(N,{className:"text-xl font-bold",children:"Expense History"}),(0,s.jsx)("div",{className:"flex gap-2",children:f.size>0&&(0,s.jsxs)(j,{variant:"destructive",onClick:()=>{f.size>0&&(a(Array.from(f)),g(new Set))},className:"flex items-center gap-2",children:[(0,s.jsx)(eh.A,{className:"h-4 w-4"}),"Delete Selected (",f.size,")"]})})]})}),(0,s.jsx)(S,{children:0===e.length?(0,s.jsx)("p",{className:"text-center text-muted-foreground py-4",children:"No expenses recorded yet."}):(0,s.jsxs)(K,{children:[(0,s.jsx)(Z,{children:(0,s.jsxs)(X,{className:"hover:bg-transparent",children:[(0,s.jsx)(ee,{className:"w-[50px]",children:(0,s.jsx)("input",{type:"checkbox",checked:f.size===e.length,onChange:()=>{f.size===e.length?g(new Set):g(new Set(e.map(e=>e.id))),k(null)},className:"w-4 h-4"})}),(0,s.jsx)(ee,{children:"Date"}),(0,s.jsx)(ee,{children:"Description"}),(0,s.jsx)(ee,{children:"Category"}),(0,s.jsx)(ee,{children:"Frequency"}),(0,s.jsx)(ee,{className:"text-right",children:"Amount"}),(0,s.jsx)(ee,{className:"w-[100px] text-right",children:"Actions"})]})}),(0,s.jsx)(Q,{children:e.map((e,t)=>(0,s.jsxs)(X,{children:[(0,s.jsx)(et,{children:(0,s.jsx)("input",{type:"checkbox",checked:f.has(e.id),onChange:()=>H(e.id,t),className:"w-4 h-4 cursor-pointer"})}),(0,s.jsx)(et,{children:D(e.date)}),(0,s.jsx)(et,{className:"font-medium",children:e.description}),(0,s.jsx)(et,{children:(0,s.jsx)(eg,{style:{backgroundColor:ev(e.category),color:["Transportation","Other"].includes(e.category)?"black":"white"},children:e.category})}),(0,s.jsx)(et,{children:(0,s.jsx)(eg,{style:{backgroundColor:eb(e.frequency),color:"black"},children:M(e.frequency)})}),(0,s.jsx)(et,{className:"text-right font-medium",children:P(e.amount)}),(0,s.jsx)(et,{className:"w-[100px] text-right",children:(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(j,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 bg-zinc-900 hover:bg-zinc-800 text-white",onClick:()=>O(e),children:(0,s.jsx)(ep.A,{className:"h-4 w-4"})}),(0,s.jsx)(j,{variant:"destructive",size:"sm",className:"h-8 w-8 p-0",onClick:()=>U(e.id),children:(0,s.jsx)(eh.A,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),(0,s.jsx)(er,{open:l,onOpenChange:i,children:(0,s.jsxs)(ec,{className:"sm:max-w-[425px]",children:[(0,s.jsx)(ed,{children:(0,s.jsx)(em,{children:"Edit Expense"})}),(0,s.jsx)(A,{...E,children:(0,s.jsxs)("form",{onSubmit:E.handleSubmit(e=>{d&&(r(d.id,e.description,parseFloat(e.amount),e.category,e.frequency),i(!1),u(null))}),className:"space-y-4",children:[(0,s.jsx)(T,{control:E.control,name:"description",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Description"}),(0,s.jsx)(q,{children:(0,s.jsx)(y,{placeholder:"Enter expense description",...t})}),(0,s.jsx)(V,{})]})}}),(0,s.jsx)(T,{control:E.control,name:"amount",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Amount"}),(0,s.jsx)(q,{children:(0,s.jsx)(y,{type:"number",step:"0.01",min:"0",placeholder:"Enter amount",...t})}),(0,s.jsx)(V,{})]})}}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(T,{control:E.control,name:"category",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Category"}),(0,s.jsxs)(L,{onValueChange:t.onChange,defaultValue:t.value,value:t.value,children:[(0,s.jsx)(q,{children:(0,s.jsx)(Y,{children:(0,s.jsx)(B,{placeholder:"Select a category"})})}),(0,s.jsx)(_,{children:R.map(e=>(0,s.jsx)(G,{value:e,children:e},e))})]}),(0,s.jsx)(V,{})]})}}),(0,s.jsx)(T,{control:E.control,name:"frequency",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Frequency"}),(0,s.jsxs)(L,{onValueChange:t.onChange,defaultValue:t.value,value:t.value,children:[(0,s.jsx)(q,{children:(0,s.jsx)(Y,{children:(0,s.jsx)(B,{placeholder:"Select frequency"})})}),(0,s.jsx)(_,{children:W.map(e=>(0,s.jsx)(G,{value:e,children:M(e)},e))})]}),(0,s.jsx)(V,{})]})}})]}),(0,s.jsx)(eu,{children:(0,s.jsx)(j,{type:"submit",children:"Save Changes"})})]})})]})}),(0,s.jsx)(er,{open:o,onOpenChange:c,children:(0,s.jsxs)(ec,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(ed,{children:[(0,s.jsx)(em,{children:"Confirm Deletion"}),(0,s.jsx)(ex,{children:"This action cannot be undone. This will permanently delete the expense from your records."})]}),(0,s.jsxs)(eu,{className:"flex gap-2 justify-end mt-4",children:[(0,s.jsx)(j,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),(0,s.jsx)(j,{variant:"destructive",onClick:()=>{m&&(t(m),p(null)),c(!1)},children:"Delete"})]})]})})]})}var eS=a(63126),ek=a(41995),eF=a(26192),eC=a(91970),eA=a(79111),eE=a(80818);function eT(e){let{displayPeriod:t}=e,{getExpenseSummary:a,getTotalExpenses:r}=(0,h.g)(),l=a(),i=r(),o=(0,n.useMemo)(()=>l.map(e=>{let a=e.totalAmount,s="weekly"===t?a/52:"fortnightly"===t?a/26:"monthly"===t?a/12:a;return{...e,totalAmount:s}}),[l,t]),c=(0,n.useMemo)(()=>"weekly"===t?i/52:"fortnightly"===t?i/26:"monthly"===t?i/12:i,[i,t]),d=(0,n.useMemo)(()=>(0,eC.A)({domain:o.map(e=>e.category),range:ej}),[o]),u=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2*(e<10)}).format(e);return 0===o.length?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("p",{className:"text-center text-muted-foreground",children:"No expense data to visualize yet."})}):(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mb-6 flex justify-center",children:(0,s.jsx)(eE.A,{scale:d,direction:"row",labelMargin:"0 15px 0 0",className:"flex flex-wrap justify-center gap-x-4 gap-y-2"})}),(0,s.jsx)(eA.A,{children:e=>{let{width:a}=e,n=Math.min(a,400)/2;return(0,s.jsx)("svg",{width:a,height:400,children:(0,s.jsxs)(ek.A,{top:200,left:a/2,children:[(0,s.jsx)(eS.A,{data:o,pieValue:e=>e.totalAmount,outerRadius:n-20,innerRadius:.5*n,cornerRadius:3,padAngle:.01,children:e=>e.arcs.map((t,a)=>{let{category:n}=t.data,[r,l]=e.path.centroid(t),i=t.endAngle-t.startAngle>.1,o=e.path(t)||"",c=d(n);return(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:o,fill:c}),i&&(0,s.jsx)(eF.A,{x:r,y:l,dy:".33em",fontSize:14,textAnchor:"middle",fill:"#ffffff",children:"".concat(Math.round(t.data.percentage),"%")})]},"pie-arc-".concat(n,"-").concat(a))})}),(0,s.jsx)(eF.A,{textAnchor:"middle",fontSize:20,dy:-20,children:"Total: ".concat(u(c))}),(0,s.jsx)(eF.A,{textAnchor:"middle",fontSize:14,dy:10,children:"annually"===t?"per year":"monthly"===t?"per month":"fortnightly"===t?"per fortnight":"per week"})]})})}})]})}var eD=a(74231),eP=a(38022);let eI=["#0EA5E9","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#F97316","#6366F1","#14B8A6","#6B7280"];function ez(e){let{displayPeriod:t}=e,{getExpenseSummary:a,getTotalExpenses:r}=(0,h.g)(),l=a(),i=r(),o=(0,n.useMemo)(()=>l.map(e=>{let a=e.totalAmount,s="weekly"===t?a/52:"fortnightly"===t?a/26:"monthly"===t?a/12:a;return{...e,totalAmount:s}}),[l,t]),c=(0,n.useMemo)(()=>"weekly"===t?i/52:"fortnightly"===t?i/26:"monthly"===t?i/12:i,[i,t]),d=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2*(e<10)}).format(e),u=(0,n.useMemo)(()=>0===o.length?null:{name:"Total",value:c,children:o.map(e=>({name:e.category,value:e.totalAmount}))},[o,c]),m=(0,n.useMemo)(()=>(0,eC.A)({domain:o.map(e=>e.category),range:eI}),[o]),x=e=>"Total"===e?"#999999":m(e)||"#6B7280";return u&&0!==o.length?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-center mb-2 text-sm text-muted-foreground",children:["Showing ",t," expenses"]}),(0,s.jsx)(eA.A,{children:e=>{let{width:t}=e,a=t-40-120,n=(0,eD.Ay)(u);return(0,s.jsxs)("svg",{width:t,height:400,children:[(0,s.jsx)("rect",{width:t,height:400,fill:"transparent"}),(0,s.jsx)(ek.A,{top:40,left:40,children:(0,s.jsx)(eP.A,{root:n,size:[320,a],separation:(e,t)=>(e.parent===t.parent?1:2)/e.depth,children:e=>(0,s.jsxs)(ek.A,{children:[e.links().map((e,t)=>(0,s.jsx)("line",{x1:e.source.y,y1:e.source.x,x2:e.target.y,y2:e.target.x,stroke:x(e.target.data.name),strokeWidth:Math.max(1,(e.target.data.value||0)/c*20),opacity:.6,strokeLinecap:"round"},"link-".concat(t))),e.descendants().map((e,t)=>{let a=0===t;return(0,s.jsxs)(ek.A,{top:e.x,left:e.y,children:[(0,s.jsx)("circle",{r:a?20:15,fill:a?"#999999":x(e.data.name),opacity:.8}),(0,s.jsx)(eF.A,{dx:a?-60:20,dy:5,fontSize:12,fontWeight:"bold",textAnchor:a?"end":"start",children:"".concat(e.data.name," (").concat(d(e.data.value||0),")")})]},"node-".concat(t))})]})})})]})}})]}):(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("p",{className:"text-center text-muted-foreground",children:"No expense data to visualize yet."})})}function eq(e){let{activeType:t,onToggle:a}=e;return(0,s.jsxs)("div",{className:"flex justify-center space-x-2 mb-4",children:[(0,s.jsx)(j,{variant:"pie"===t?"default":"outline",size:"sm",onClick:()=>a("pie"),children:"Pie Chart"}),(0,s.jsx)(j,{variant:"sankey"===t?"default":"outline",size:"sm",onClick:()=>a("sankey"),children:"Flow Diagram"})]})}function eM(){let[e,t]=(0,n.useState)("pie"),[a,r]=(0,n.useState)("monthly");return(0,s.jsxs)(v,{className:"w-full",children:[(0,s.jsx)(b,{className:"pb-2",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(N,{children:"Expense Breakdown"}),(0,s.jsxs)(L,{value:a,onValueChange:e=>r(e),children:[(0,s.jsx)(Y,{className:"w-[140px]",children:(0,s.jsx)(B,{placeholder:"Select frequency"})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(G,{value:"weekly",children:"Weekly"}),(0,s.jsx)(G,{value:"fortnightly",children:"Fortnightly"}),(0,s.jsx)(G,{value:"monthly",children:"Monthly"}),(0,s.jsx)(G,{value:"annually",children:"Annually"})]})]})]})}),(0,s.jsx)("div",{className:"px-6 pb-2",children:(0,s.jsx)(eq,{activeType:e,onToggle:t})}),(0,s.jsx)(S,{children:(0,s.jsx)("div",{className:"h-[450px]",children:"pie"===e?(0,s.jsx)(eT,{displayPeriod:a}):(0,s.jsx)(ez,{displayPeriod:a})})})]})}var eV=a(23478);function eO(e){let{...t}=e;return(0,s.jsx)(eV.bL,{"data-slot":"accordion",...t})}function eU(e){let{className:t,...a}=e;return(0,s.jsx)(eV.q7,{"data-slot":"accordion-item",className:o("border-b last:border-b-0",t),...a})}function eH(e){let{className:t,children:a,...n}=e;return(0,s.jsx)(eV.Y9,{className:"flex",children:(0,s.jsxs)(eV.l9,{"data-slot":"accordion-trigger",className:o("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",t),...n,children:[a,(0,s.jsx)(U.A,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function eR(e){let{className:t,children:a,...n}=e;return(0,s.jsx)(eV.UC,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:(0,s.jsx)("div",{className:o("pt-0 pb-4",t),children:a})})}var eL=a(4884);function eB(e){let{className:t,...a}=e;return(0,s.jsx)(eL.bL,{"data-slot":"switch",className:o("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,s.jsx)(eL.zi,{"data-slot":"switch-thumb",className:o("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var eY=a(51368);function e_(e){let{existingDeductions:t=[],onSave:a}=e,[r,l]=(0,n.useState)(t),i=(0,x.mN)({defaultValues:{name:"",amount:"",isTaxDeductible:!0}}),o=e=>{let t=r.filter(t=>t.id!==e);l(t),a(t)},c=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium",children:"Deductions"}),(0,s.jsx)(A,{...i,children:(0,s.jsxs)("form",{onSubmit:i.handleSubmit(e=>{let t=[...r,{id:(0,eY.A)(),name:e.name,amount:parseFloat(e.amount),isTaxDeductible:e.isTaxDeductible}];l(t),a(t),i.reset()}),className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsx)("div",{className:"col-span-3 sm:col-span-1",children:(0,s.jsx)(T,{control:i.control,name:"name",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Description"}),(0,s.jsx)(q,{children:(0,s.jsx)(y,{placeholder:"e.g., 401k",...t})}),(0,s.jsx)(V,{})]})}})}),(0,s.jsx)("div",{className:"col-span-3 sm:col-span-1",children:(0,s.jsx)(T,{control:i.control,name:"amount",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Amount"}),(0,s.jsx)(q,{children:(0,s.jsx)(y,{type:"number",step:"0.01",min:"0",placeholder:"0.00",...t})}),(0,s.jsx)(V,{})]})}})}),(0,s.jsx)("div",{className:"col-span-3 sm:col-span-1",children:(0,s.jsx)(T,{control:i.control,name:"isTaxDeductible",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{className:"flex flex-row items-end h-full space-x-2 pb-2",children:[(0,s.jsx)(q,{children:(0,s.jsx)(eB,{checked:t.value,onCheckedChange:t.onChange})}),(0,s.jsx)(z,{className:"mt-1",children:"Tax Deductible"})]})}})})]}),(0,s.jsx)(j,{type:"submit",size:"sm",children:"+ Add Deduction"})]})}),r.length>0&&(0,s.jsxs)("div",{className:"border rounded-md p-4 mt-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Current Deductions"}),(0,s.jsx)("ul",{className:"space-y-2",children:r.map(e=>(0,s.jsxs)("li",{className:"flex justify-between items-center text-sm p-2 bg-muted/50 rounded",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:e.name}),(0,s.jsx)("span",{className:"ml-2 text-muted-foreground",children:c(e.amount)})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[e.isTaxDeductible&&(0,s.jsx)("span",{className:"text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:"Tax Deductible"}),(0,s.jsx)(j,{variant:"ghost",size:"icon",onClick:()=>o(e.id),className:"h-6 w-6",children:(0,s.jsx)(en.A,{className:"h-4 w-4"})})]})]},e.id))})]})]})}function eG(){let{addIncome:e}=(0,h.g)(),[t,a]=(0,n.useState)([]),r=(0,x.mN)({defaultValues:{source:"",amount:"",frequency:"monthly",taxStatus:"preTax"}}),l=["weekly","fortnightly","monthly","annually"],i=["preTax","postTax"];return(0,s.jsxs)(v,{className:"w-full",children:[(0,s.jsx)(b,{children:(0,s.jsx)(N,{children:"Add Income"})}),(0,s.jsx)(S,{children:(0,s.jsx)(A,{...r,children:(0,s.jsxs)("form",{onSubmit:r.handleSubmit(s=>{e(s.source,parseFloat(s.amount),s.frequency,s.taxStatus,t.length>0?t:void 0),r.reset(),a([])}),className:"space-y-4",children:[(0,s.jsx)(T,{control:r.control,name:"source",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Source"}),(0,s.jsx)(q,{children:(0,s.jsx)(y,{placeholder:"Enter income source",...t})}),(0,s.jsx)(V,{})]})}}),(0,s.jsx)(T,{control:r.control,name:"amount",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Amount"}),(0,s.jsx)(q,{children:(0,s.jsx)(y,{type:"number",step:"0.01",min:"0",placeholder:"Enter amount",...t})}),(0,s.jsx)(V,{})]})}}),(0,s.jsx)(T,{control:r.control,name:"frequency",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Frequency"}),(0,s.jsxs)(L,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(q,{children:(0,s.jsx)(Y,{children:(0,s.jsx)(B,{placeholder:"Select frequency"})})}),(0,s.jsx)(_,{children:l.map(e=>(0,s.jsx)(G,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,s.jsx)(V,{})]})}}),(0,s.jsxs)(eO,{type:"single",collapsible:!0,className:"w-full",children:[(0,s.jsxs)(eU,{value:"tax-settings",children:[(0,s.jsx)(eH,{className:"text-sm font-medium",children:"Tax Settings"}),(0,s.jsx)(eR,{children:(0,s.jsx)("div",{className:"space-y-4 pt-2",children:(0,s.jsx)(T,{control:r.control,name:"taxStatus",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Tax Status"}),(0,s.jsxs)(L,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(q,{children:(0,s.jsx)(Y,{children:(0,s.jsx)(B,{placeholder:"Select tax status"})})}),(0,s.jsx)(_,{children:i.map(e=>(0,s.jsx)(G,{value:e,children:"preTax"===e?"Pre-Tax":"Post-Tax"},e))})]}),(0,s.jsx)(V,{})]})}})})})]}),(0,s.jsxs)(eU,{value:"deductions",children:[(0,s.jsx)(eH,{className:"text-sm font-medium",children:"Deductions"}),(0,s.jsx)(eR,{children:(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)(e_,{existingDeductions:t,onSave:e=>{a(e)}})})})]})]}),(0,s.jsx)(j,{type:"submit",className:"w-full mt-6",children:"Add Income"})]})})})]})}var eW=a(13052);function eJ(){let{incomes:e,deleteIncome:t,updateIncome:a}=(0,h.g)(),[r,l]=(0,n.useState)(null),[i,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),[m,p]=(0,n.useState)(null),[f,g]=(0,n.useState)(null),w=(0,x.mN)({defaultValues:{source:"",amount:"",frequency:"monthly",taxStatus:"preTax"}}),k=e=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(e),F=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),C=e=>e.charAt(0).toUpperCase()+e.slice(1),E=e=>{r===e?l(null):l(e)},D=e=>{p(e),w.reset({source:e.source,amount:e.amount.toString(),frequency:e.frequency,taxStatus:e.taxStatus}),c(!0)},P=e=>{g(e),u(!0)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(v,{className:"w-full",children:[(0,s.jsx)(b,{className:"pb-3",children:(0,s.jsx)(N,{className:"text-xl font-bold",children:"Income Sources"})}),(0,s.jsx)(S,{children:0===e.length?(0,s.jsx)("p",{className:"text-center text-muted-foreground py-4",children:"No income sources recorded yet."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(K,{children:[(0,s.jsx)(Z,{children:(0,s.jsxs)(X,{children:[(0,s.jsx)(ee,{className:"w-[30px]"}),(0,s.jsx)(ee,{children:"Date"}),(0,s.jsx)(ee,{children:"Source"}),(0,s.jsx)(ee,{className:"hidden md:table-cell",children:"Frequency"}),(0,s.jsx)(ee,{className:"hidden lg:table-cell",children:"Tax Status"}),(0,s.jsx)(ee,{className:"text-right",children:"Amount"}),(0,s.jsx)(ee,{className:"w-[100px] text-right",children:"Actions"})]})}),(0,s.jsx)(Q,{children:e.map(e=>(0,s.jsxs)(n.Fragment,{children:[(0,s.jsxs)(X,{children:[(0,s.jsx)(et,{className:"w-[30px] pr-0",children:e.deductions&&e.deductions.length>0?(0,s.jsx)(j,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>E(e.id),children:(0,s.jsx)(eW.A,{className:o("h-4 w-4 transition-transform",r===e.id&&"transform rotate-90")})}):(0,s.jsx)("div",{className:"w-6"})}),(0,s.jsx)(et,{children:k(e.date)}),(0,s.jsxs)(et,{children:[(0,s.jsx)(eg,{style:{backgroundColor:eN(e.source),color:"Investment"===e.source?"black":"white"},children:e.source}),(0,s.jsxs)("div",{className:"md:hidden mt-1 flex flex-wrap gap-1",children:[(0,s.jsx)(eg,{variant:"outline",className:"text-xs",style:{backgroundColor:eb(e.frequency),color:"black"},children:C(e.frequency)}),(0,s.jsx)(eg,{variant:"outline",className:"text-xs",children:"preTax"===e.taxStatus?"Pre-Tax":"Post-Tax"})]})]}),(0,s.jsx)(et,{className:"hidden md:table-cell",children:(0,s.jsx)(eg,{style:{backgroundColor:eb(e.frequency),color:"black"},children:C(e.frequency)})}),(0,s.jsx)(et,{className:"hidden lg:table-cell",children:(0,s.jsx)(eg,{variant:"preTax"===e.taxStatus?"default":"secondary",children:"preTax"===e.taxStatus?"Pre-Tax":"Post-Tax"})}),(0,s.jsx)(et,{className:"text-right font-medium",children:F(e.amount)}),(0,s.jsx)(et,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(j,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 bg-zinc-900 hover:bg-zinc-800 text-white",onClick:()=>D(e),children:(0,s.jsx)(ep.A,{className:"h-4 w-4"})}),(0,s.jsx)(j,{variant:"destructive",size:"sm",className:"h-8 w-8 p-0",onClick:()=>P(e.id),children:(0,s.jsx)(eh.A,{className:"h-4 w-4"})})]})})]}),r===e.id&&e.deductions&&e.deductions.length>0&&(0,s.jsx)(X,{className:"bg-muted/50",children:(0,s.jsxs)(et,{colSpan:7,className:"px-4 py-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium mb-2",children:"Deductions"}),(0,s.jsx)("div",{className:"space-y-2",children:e.deductions.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{children:e.name}),(0,s.jsx)("div",{className:"font-medium",children:F(-e.amount)})]},e.id))})]})})]},e.id))})]})})})]}),(0,s.jsx)(er,{open:i,onOpenChange:c,children:(0,s.jsxs)(ec,{className:"sm:max-w-[425px]",children:[(0,s.jsx)(ed,{children:(0,s.jsx)(em,{children:"Edit Income"})}),(0,s.jsx)(A,{...w,children:(0,s.jsxs)("form",{onSubmit:w.handleSubmit(e=>{m&&(a(m.id,e.source,parseFloat(e.amount),e.frequency,e.taxStatus,m.deductions),c(!1),p(null))}),className:"space-y-4",children:[(0,s.jsx)(T,{control:w.control,name:"source",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Source"}),(0,s.jsx)(q,{children:(0,s.jsx)(y,{placeholder:"Enter income source",...t})}),(0,s.jsx)(V,{})]})}}),(0,s.jsx)(T,{control:w.control,name:"amount",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Amount"}),(0,s.jsx)(q,{children:(0,s.jsx)(y,{type:"number",step:"0.01",min:"0",placeholder:"Enter amount",...t})}),(0,s.jsx)(V,{})]})}}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(T,{control:w.control,name:"frequency",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Frequency"}),(0,s.jsxs)(L,{onValueChange:t.onChange,defaultValue:t.value,value:t.value,children:[(0,s.jsx)(q,{children:(0,s.jsx)(Y,{children:(0,s.jsx)(B,{placeholder:"Select frequency"})})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(G,{value:"weekly",children:"Weekly"}),(0,s.jsx)(G,{value:"fortnightly",children:"Fortnightly"}),(0,s.jsx)(G,{value:"monthly",children:"Monthly"}),(0,s.jsx)(G,{value:"annually",children:"Annually"})]})]}),(0,s.jsx)(V,{})]})}}),(0,s.jsx)(T,{control:w.control,name:"taxStatus",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Tax Status"}),(0,s.jsxs)(L,{onValueChange:t.onChange,defaultValue:t.value,value:t.value,children:[(0,s.jsx)(q,{children:(0,s.jsx)(Y,{children:(0,s.jsx)(B,{placeholder:"Select tax status"})})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(G,{value:"preTax",children:"Pre-Tax"}),(0,s.jsx)(G,{value:"postTax",children:"Post-Tax"})]})]}),(0,s.jsx)(V,{})]})}})]}),(0,s.jsx)(eu,{children:(0,s.jsx)(j,{type:"submit",children:"Save Changes"})})]})})]})}),(0,s.jsx)(er,{open:d,onOpenChange:u,children:(0,s.jsxs)(ec,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(ed,{children:[(0,s.jsx)(em,{children:"Confirm Deletion"}),(0,s.jsx)(ex,{children:"This action cannot be undone. This will permanently delete the income source from your records."})]}),(0,s.jsxs)(eu,{className:"flex gap-2 justify-end mt-4",children:[(0,s.jsx)(j,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),(0,s.jsx)(j,{variant:"destructive",onClick:()=>{f&&(t(f),g(null)),u(!1)},children:"Delete"})]})]})})]})}var e$=a(75338);let eK={australia:"\uD83C\uDDE6\uD83C\uDDFA",uk:"\uD83C\uDDEC\uD83C\uDDE7",simple:"\uD83C\uDF10"};function eZ(){let{taxConfig:e,updateTaxConfig:t}=(0,h.g)(),[a,r]=(0,n.useState)("general"),[l,i]=(0,n.useState)(""),o=(0,x.mN)({defaultValues:e});(0,n.useEffect)(()=>{o.reset(e)},[e,o]);let p=e=>{o.setValue("country",e,{shouldDirty:!0,shouldTouch:!0}),"simple"!==e&&o.setValue("taxRate",(0,e$.PV)(e).brackets[0].rate,{shouldDirty:!0,shouldTouch:!0})},f=e=>"".concat(e,"%"),g=(e,t,a)=>{let s=new Intl.NumberFormat("en",{style:"currency",currency:a,maximumFractionDigits:0}).format(e);if(null===t)return"".concat(s," and above");let n=new Intl.NumberFormat("en",{style:"currency",currency:a,maximumFractionDigits:0}).format(t);return"".concat(s," to ").concat(n)};return(0,s.jsxs)(v,{className:"w-full",children:[(0,s.jsxs)(b,{children:[(0,s.jsx)(N,{children:"Tax Settings"}),(0,s.jsx)(w,{children:"Configure how income tax is calculated"})]}),(0,s.jsx)(S,{children:(0,s.jsxs)(c,{value:a,onValueChange:r,className:"w-full",children:[(0,s.jsxs)(d,{className:"grid grid-cols-2 mb-4",children:[(0,s.jsx)(u,{value:"general",children:"General Settings"}),(0,s.jsx)(u,{value:"brackets",children:"Tax Brackets"})]}),(0,s.jsx)(m,{value:"general",children:(0,s.jsx)(A,{...o,children:(0,s.jsxs)("form",{onSubmit:o.handleSubmit(e=>{t(e),i("Tax settings saved successfully!"),o.reset(e),setTimeout(()=>{i("")},3e3)}),className:"space-y-6",children:[(0,s.jsx)(T,{control:o.control,name:"enabled",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(z,{className:"text-base",children:"Enable Tax Calculations"}),(0,s.jsx)(M,{children:"Turn on/off tax calculations for your income"})]}),(0,s.jsx)(q,{children:(0,s.jsx)(eB,{checked:t.value,onCheckedChange:t.onChange})})]})}}),(0,s.jsx)(T,{control:o.control,name:"country",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Tax System"}),(0,s.jsxs)(L,{onValueChange:e=>p(e),defaultValue:t.value,disabled:!o.watch("enabled"),children:[(0,s.jsx)(q,{children:(0,s.jsx)(Y,{children:(0,s.jsx)(B,{placeholder:"Select tax system",children:t.value&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{role:"img","aria-label":t.value,children:eK[t.value]}),(0,s.jsx)("span",{children:(0,e$.PV)(t.value).name})]})})})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(G,{value:"simple",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{role:"img","aria-label":"Global",children:eK.simple}),(0,s.jsx)("span",{children:"Simple Flat Rate"})]})}),(0,s.jsx)(G,{value:"australia",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{role:"img","aria-label":"Australia",children:eK.australia}),(0,s.jsx)("span",{children:"Australia"})]})}),(0,s.jsx)(G,{value:"uk",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{role:"img","aria-label":"United Kingdom",children:eK.uk}),(0,s.jsx)("span",{children:"United Kingdom"})]})})]})]}),(0,s.jsx)(M,{children:"Choose which country's tax system to use"})]})}}),"simple"===o.watch("country")&&(0,s.jsx)(T,{control:o.control,name:"taxRate",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Tax Rate (%)"}),(0,s.jsx)(q,{children:(0,s.jsx)(y,{type:"number",step:"0.1",min:"0",max:"100",disabled:!o.watch("enabled"),...t,onChange:e=>t.onChange(parseFloat(e.target.value))})}),(0,s.jsx)(M,{children:"Enter your marginal tax rate as a percentage"}),(0,s.jsx)(V,{})]})}}),(0,s.jsx)(T,{control:o.control,name:"includeDeductions",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(z,{className:"text-base",children:"Include Deductions"}),(0,s.jsx)(M,{children:"Apply tax deductions to your calculations"})]}),(0,s.jsx)(q,{children:(0,s.jsx)(eB,{checked:t.value,onCheckedChange:t.onChange,disabled:!o.watch("enabled")})})]})}}),(0,s.jsx)(j,{type:"submit",className:"w-full",disabled:!o.formState.isDirty,children:"Save Tax Settings"}),l&&(0,s.jsx)("p",{className:"text-center text-sm text-green-600 mt-2 animate-fadeIn",children:l})]})})}),(0,s.jsx)(m,{value:"brackets",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{role:"img","aria-label":o.watch("country"),children:eK[o.watch("country")]}),(0,s.jsxs)("span",{children:[(0,e$.PV)(o.watch("country")).name," Tax Brackets"]})]}),"simple"!==o.watch("country")&&(0,s.jsxs)(K,{children:[(0,s.jsxs)(ea,{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{role:"img","aria-label":o.watch("country"),children:eK[o.watch("country")]}),(0,s.jsxs)("span",{children:["Tax rates for the ",(0,e$.PV)(o.watch("country")).name," tax system"]})]}),(0,s.jsx)(Z,{children:(0,s.jsxs)(X,{children:[(0,s.jsx)(ee,{children:"Income Range"}),(0,s.jsx)(ee,{children:"Tax Rate"}),(0,s.jsx)(ee,{children:"Tax on this Bracket"})]})}),(0,s.jsx)(Q,{children:(0,e$.PV)(o.watch("country")).brackets.map((e,t)=>(0,s.jsxs)(X,{children:[(0,s.jsx)(et,{children:g(e.min,e.max,(0,e$.PV)(o.watch("country")).currency)}),(0,s.jsx)(et,{children:f(e.rate)}),(0,s.jsx)(et,{children:void 0!==e.baseAmount?"".concat(e.baseAmount," + ").concat(e.rate,"% of excess over ").concat(e.min):"".concat(e.rate,"% of income")})]},t))})]}),"simple"===o.watch("country")&&(0,s.jsx)("div",{className:"p-4 border rounded-lg bg-muted",children:(0,s.jsxs)("p",{children:["Using simple flat rate tax calculation: ",o.watch("taxRate"),"% of income."]})}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-4",children:"Tax brackets are for informational purposes. The app will automatically calculate taxes based on the selected tax system."})]})})]})})]})}var eQ=a(11518),eX=a.n(eQ),e0=a(89840),e2=a(71734),e1=a(73879),e4=a(43356);function e5(e){let{displayPeriod:t}=e,{getTotalIncome:a,getNetIncome:r,getTotalExpenses:l,taxConfig:i,incomes:o,getExpenseSummary:c}=(0,h.g)(),{tooltipData:d,tooltipLeft:u,tooltipTop:m,tooltipOpen:x,showTooltip:p,hideTooltip:f}=(0,e1.A)(),g=(e,t)=>{switch(t){case"weekly":return e/52;case"fortnightly":return e/26;case"monthly":return e/12;default:return e}},j=a(t),y=r(t),v=c(),b=g(l(),t),N=y-b,w=j-y,S=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e),k=e=>"".concat(e.toFixed(1),"%"),F=(e,a)=>{let s="weekly"===a?52*e:"fortnightly"===a?26*e:"monthly"===a?12*e:e;return"weekly"===t?s/52:"fortnightly"===t?s/26:"monthly"===t?s/12:s},{nodes:C,links:A}=(0,n.useMemo)(()=>{let e=j||1,a=(0,eC.A)({domain:o.map(e=>e.source),range:["#3b82f6","#60a5fa","#93c5fd","#bfdbfe"]}),s=(0,eC.A)({domain:["Expenses","Food","Housing","Transportation","Entertainment","Healthcare","Utilities","Shopping","Education","Travel","Other"],range:["#ef4444","#f87171","#fca5a5","#fee2e2","#fecaca","#fda4af","#f43f5e","#fb7185","#fda4af","#fda4af","#fda4af"]}),n=(0,eC.A)({domain:["Savings","Investments","Cash","Retirement"],range:["#22c55e","#4ade80","#86efac","#bbf7d0"]}),r=[],l=new Map,c=[...o].sort((e,t)=>F(t.amount,t.frequency)-F(e.amount,e.frequency));if(c.forEach((t,s)=>{let n=F(t.amount,t.frequency),i={name:t.source,type:"income",amount:n,percentage:n/e*100,color:a(t.source)};r.push(i),l.set(t.source,s)}),i.enabled&&w>0&&(r.push({name:"Tax",type:"tax",amount:w,percentage:w/e*100,color:"#f97316"}),l.set("Tax",r.length-1)),b>0){let t={name:"Expenses",type:"expense-category",amount:b,percentage:b/e*100,color:s("Expenses")};r.push(t),l.set("Expenses",r.length-1)}if(N>0){let t={name:"Savings",type:"savings-category",amount:N,percentage:N/e*100,color:n("Savings")};r.push(t),l.set("Savings",r.length-1),[{name:"Investments",amount:.4*N},{name:"Cash",amount:.3*N},{name:"Retirement",amount:.3*N}].forEach(t=>{let a={name:t.name,type:"savings-subcategory",amount:t.amount,percentage:t.amount/e*100,color:n(t.name)};r.push(a),l.set(t.name,r.length-1)})}let d=new Map;["Food","Housing","Transportation","Entertainment","Healthcare","Utilities","Shopping","Education","Travel","Other"].forEach(e=>{d.set(e,{totalAmount:0,expenses:[]})}),v.forEach(e=>{let a=g(e.totalAmount,t),s=e.category;d.has(s)||(s="Other");let n=d.get(s);n&&(n.totalAmount+=a,n.expenses.push({name:e.category,amount:a}))}),d.forEach((t,a)=>{if(t.totalAmount>0){let n={name:a,type:"expense-subcategory",amount:t.totalAmount,percentage:t.totalAmount/e*100,color:s(a)};r.push(n),l.set(a,r.length-1)}});let u=[];return i.enabled&&w>0&&c.forEach(t=>{var s,n;if("postTax"===t.taxStatus)return;let r=F(t.amount,t.frequency),i=c.filter(e=>"preTax"===e.taxStatus).reduce((e,t)=>e+F(t.amount,t.frequency),0),o=i>0?r/i*w:0;if(o<=0)return;let d=null!==(s=l.get(t.source))&&void 0!==s?s:0,m=null!==(n=l.get("Tax"))&&void 0!==n?n:0;u.push({source:d,target:m,value:o,sourceName:t.source,targetName:"Tax",sourceAmount:r,targetAmount:w,percentage:o/e*100,color:a(t.source)})}),b>0&&(c.forEach(t=>{var s,n;let r=F(t.amount,t.frequency),i=("postTax"===t.taxStatus?r:r*(1-w/e))/(e-w)*b;if(i<=0)return;let o=null!==(s=l.get(t.source))&&void 0!==s?s:0,c=null!==(n=l.get("Expenses"))&&void 0!==n?n:0;u.push({source:o,target:c,value:i,sourceName:t.source,targetName:"Expenses",sourceAmount:r,targetAmount:b,percentage:i/e*100,color:a(t.source)})}),d.forEach((t,a)=>{if(t.totalAmount>0){var n,r;let i=null!==(n=l.get("Expenses"))&&void 0!==n?n:0,o=null!==(r=l.get(a))&&void 0!==r?r:0;u.push({source:i,target:o,value:t.totalAmount,sourceName:"Expenses",targetName:a,sourceAmount:b,targetAmount:t.totalAmount,percentage:t.totalAmount/e*100,color:s("Expenses")})}})),N>0&&(c.forEach(t=>{var s,n;let r=F(t.amount,t.frequency),i=("postTax"===t.taxStatus?r:r*(1-w/e))/(e-w)*N;if(i<=0)return;let o=null!==(s=l.get(t.source))&&void 0!==s?s:0,c=null!==(n=l.get("Savings"))&&void 0!==n?n:0;u.push({source:o,target:c,value:i,sourceName:t.source,targetName:"Savings",sourceAmount:r,targetAmount:N,percentage:i/e*100,color:a(t.source)})}),[{name:"Investments",amount:.4*N},{name:"Cash",amount:.3*N},{name:"Retirement",amount:.3*N}].forEach(t=>{var a,s;let r=null!==(a=l.get("Savings"))&&void 0!==a?a:0,i=null!==(s=l.get(t.name))&&void 0!==s?s:0;u.push({source:r,target:i,value:t.amount,sourceName:"Savings",targetName:t.name,sourceAmount:N,targetAmount:t.amount,percentage:t.amount/e*100,color:n("Savings")})})),{nodes:r,links:u,nodeMap:l}},[o,v,j,w,N,b,t,i]);return 0===C.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-[600px] text-muted-foreground",children:"No financial data to visualize. Add income and expenses to see the flow diagram."}):(0,s.jsxs)("div",{className:"jsx-a9f329c62fb96625 w-full overflow-hidden",children:[(0,s.jsx)(eX(),{id:"a9f329c62fb96625",children:".sankey-node:hover{opacity:.8}.sankey-link:hover{opacity:.5}"}),(0,s.jsxs)("div",{className:"jsx-a9f329c62fb96625 mb-2 text-sm text-muted-foreground",children:["Showing ",t," flow of funds"]}),(0,s.jsx)(eA.A,{debounceTime:10,children:e=>{let{width:a}=e,n=a-20-20,r={nodes:C.map(e=>({name:e.name})),links:A.map(e=>{var t,a;return{source:(null===(t=C[e.source])||void 0===t?void 0:t.name)||"",target:(null===(a=C[e.target])||void 0===a?void 0:a.name)||"",value:e.value}})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{width:a,height:500,className:"jsx-a9f329c62fb96625",children:[(0,s.jsx)("rect",{width:a,height:500,fill:"transparent",className:"jsx-a9f329c62fb96625"}),(0,s.jsx)(ek.A,{left:20,top:20,children:(0,s.jsx)(e0.A,{root:r,size:[n,460],nodeWidth:40,nodePadding:20,nodeId:e=>e.name,children:e=>{let{graph:a,createPath:n}=e;return a&&a.links&&a.nodes?(0,s.jsxs)(ek.A,{children:[a.links.map((e,t)=>{var a,r,l,i,o;let c=(null===(a=A[t])||void 0===a?void 0:a.color)||"#aaa",d=(null===(r=A[t])||void 0===r?void 0:r.sourceName)||"",u=(null===(l=A[t])||void 0===l?void 0:l.targetName)||"",m=(null===(i=A[t])||void 0===i?void 0:i.percentage)||0,x=(null===(o=A[t])||void 0===o?void 0:o.value)||0;return(0,s.jsx)(ek.A,{children:(0,s.jsx)("path",{d:n(e)||"",fill:"none",stroke:c,strokeWidth:Math.max(2,e.width||0),strokeOpacity:.6,onMouseEnter:e=>{p({tooltipData:{name:"".concat(d," → ").concat(u),value:x,percentage:m,color:c,type:"link",sourceName:d,targetName:u},tooltipLeft:e.clientX,tooltipTop:e.clientY})},onMouseLeave:()=>f(),className:"jsx-a9f329c62fb96625"})},"link-".concat(t))}),a.nodes.map((e,a)=>{var n,r,l,i,o;let c=(null===(n=C[a])||void 0===n?void 0:n.name)||"",d=(null===(r=C[a])||void 0===r?void 0:r.color)||"#333",u=(null===(l=C[a])||void 0===l?void 0:l.amount)||0,m=(null===(i=C[a])||void 0===i?void 0:i.percentage)||0,x=(null===(o=C[a])||void 0===o?void 0:o.type)||"",h=(e.y1||0)-(e.y0||0),g=h<30?8:h<50?10:11,j=g-2;return(0,s.jsxs)(ek.A,{children:[(0,s.jsx)(e2.A,{x:e.x0||0,y:e.y0||0,width:(e.x1||0)-(e.x0||0),height:(e.y1||0)-(e.y0||0),fill:d,rx:4,className:"sankey-node",onMouseEnter:e=>{p({tooltipData:{name:c,value:u,percentage:m,color:d,type:x},tooltipLeft:e.clientX,tooltipTop:e.clientY})},onMouseLeave:()=>f()}),(0,s.jsx)(eF.A,{x:(e.x0||0)+((e.x1||0)-(e.x0||0))/2,y:(e.y0||0)+((e.y1||0)-(e.y0||0))/2-8,width:Math.min(100,(e.x1||0)-(e.x0||0)-4),textAnchor:"middle",verticalAnchor:"middle",fill:"white",fontSize:g,fontWeight:"bold",style:{wordWrap:"break-word",whiteSpace:"normal"},children:c.length>12?"".concat(c.substring(0,10),"..."):c}),(0,s.jsx)(eF.A,{x:(e.x0||0)+((e.x1||0)-(e.x0||0))/2,y:(e.y0||0)+((e.y1||0)-(e.y0||0))/2+8,width:(e.x1||0)-(e.x0||0),textAnchor:"middle",verticalAnchor:"middle",fill:"white",fontSize:j,children:S(u)}),h>40&&(0,s.jsx)(eF.A,{x:(e.x0||0)+((e.x1||0)-(e.x0||0))/2,y:(e.y0||0)+((e.y1||0)-(e.y0||0))/2+22,width:(e.x1||0)-(e.x0||0),textAnchor:"middle",verticalAnchor:"middle",fill:"white",fontSize:j-1,children:"annually"===t?"per year":"monthly"===t?"per month":"fortnightly"===t?"per fortnight":"per week"})]},"node-".concat(a))})]}):null}})})]}),x&&d&&(0,s.jsxs)("div",{style:{...e4.k,position:"absolute",top:m,left:u,backgroundColor:"var(--background)",color:"var(--foreground)",border:"1px solid var(--border)",borderRadius:"0.375rem",padding:"0.5rem",fontSize:"0.75rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},className:"jsx-a9f329c62fb96625",children:[(0,s.jsx)("div",{style:{fontWeight:"bold"},className:"jsx-a9f329c62fb96625",children:d.name}),(0,s.jsxs)("div",{style:{color:d.color},className:"jsx-a9f329c62fb96625",children:[S(d.value),(0,s.jsx)("span",{className:"jsx-a9f329c62fb96625 text-muted-foreground text-xs ml-1",children:"annually"===t?"per year":"monthly"===t?"per month":"fortnightly"===t?"per fortnight":"per week"}),(0,s.jsxs)("span",{className:"jsx-a9f329c62fb96625 ml-1",children:["(",k(d.percentage),")"]})]}),"link"===d.type&&d.sourceName&&d.targetName&&(0,s.jsxs)("div",{style:{color:"var(--muted-foreground)",fontSize:"0.7rem",marginTop:"0.25rem"},className:"jsx-a9f329c62fb96625",children:[k(d.percentage)," of total income flows from ",d.sourceName," to ",d.targetName]}),"expense-subcategory"===d.type&&(0,s.jsxs)("div",{style:{color:"var(--muted-foreground)",fontSize:"0.7rem",marginTop:"0.25rem"},className:"jsx-a9f329c62fb96625",children:["This represents all ",d.name," expenses calculated on a ",t," basis"]})]})]})}}),(0,s.jsxs)("div",{className:"jsx-a9f329c62fb96625 text-xs text-muted-foreground mt-2",children:["The flow diagram shows how income is distributed across expenses, taxes, and savings on a ",t," basis."]})]})}function e6(){let{getTotalIncome:e,getNetIncome:t,getTotalExpenses:a,taxConfig:r,incomes:l}=(0,h.g)(),[i,o]=(0,n.useState)("monthly"),x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.country,a=(0,e$.PV)(t).currency;return new Intl.NumberFormat("en",{style:"currency",currency:a,maximumFractionDigits:2}).format(e)},p=e(i),f=t(i),g=a(),j="annually"===i?g:"monthly"===i?g/12:"fortnightly"===i?g/26:g/52,y=f-j,w=p>0?y/p*100:0,k=isNaN(w)?0:w,F=p-f,C=(()=>{if(!r.enabled||p<=0||F<=0)return 0;if("simple"===r.country)return r.taxRate;let e=F/p*100;return isNaN(e)?0:e})(),A=(0,n.useMemo)(()=>{let e=0,t=0,a=0;return l.forEach(s=>{if(s.deductions&&s.deductions.length>0){a+=s.deductions.length;let n="weekly"===s.frequency?52:"fortnightly"===s.frequency?26:"monthly"===s.frequency?12:1,r="weekly"===i?52:"fortnightly"===i?26:"monthly"===i?12:1;s.deductions.forEach(a=>{let s=a.amount*n/r;e+=s,a.isTaxDeductible&&(t+=s)})}}),{count:a,totalAmount:e,taxDeductibleAmount:t}},[l,i]),E=k>=20?"excellent":k>=10?"good":k>=0?"fair":"poor",T={excellent:"text-green-600",good:"text-emerald-500",fair:"text-amber-500",poor:"text-red-500"};return(0,s.jsxs)(v,{className:"w-full",children:[(0,s.jsxs)(b,{className:"flex flex-row items-center justify-between",children:[(0,s.jsx)(N,{children:"Financial Summary"}),(0,s.jsxs)(L,{value:i,onValueChange:e=>o(e),children:[(0,s.jsx)(Y,{className:"w-[150px]",children:(0,s.jsx)(B,{placeholder:"Select period"})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(G,{value:"weekly",children:"Weekly"}),(0,s.jsx)(G,{value:"fortnightly",children:"Fortnightly"}),(0,s.jsx)(G,{value:"monthly",children:"Monthly"}),(0,s.jsx)(G,{value:"annually",children:"Annually"})]})]})]}),(0,s.jsx)(S,{children:(0,s.jsxs)(c,{defaultValue:"summary",className:"w-full",children:[(0,s.jsxs)(d,{className:"grid w-full grid-cols-3",children:[(0,s.jsx)(u,{value:"summary",children:"Summary"}),(0,s.jsx)(u,{value:"details",children:"Details"}),(0,s.jsx)(u,{value:"flow",children:"Flow"})]}),(0,s.jsx)(m,{value:"summary",className:"space-y-4 mt-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Income"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:x(p)}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[i,"simple"!==r.country&&(0,s.jsx)("span",{role:"img","aria-label":r.country,className:"ml-1",children:eK[r.country]})]})]}),(0,s.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Expenses"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:x(j)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:i})]}),(0,s.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Savings"}),(0,s.jsx)("p",{className:"text-2xl font-bold ".concat(T[E]),children:x(y)}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[k.toFixed(1),"% of income"]})]})]})}),(0,s.jsx)(m,{value:"details",className:"space-y-4 mt-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Total Income:"}),(0,s.jsx)("span",{className:"font-medium",children:x(p)})]}),r.enabled&&p>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-muted-foreground flex items-center gap-1",children:["simple"!==r.country&&(0,s.jsx)("span",{role:"img","aria-label":r.country,className:"text-sm",children:eK[r.country]}),"simple"===r.country?"Tax (".concat(r.taxRate,"%):"):"".concat((0,e$.PV)(r.country).name," Tax (").concat(isNaN(C)?"0.0":C.toFixed(1),"% effective):")]}),(0,s.jsxs)("span",{className:"font-medium text-red-500",children:["-",x(F)]})]}),A.count>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-muted-foreground",children:["Deductions (",A.count,"):"]}),(0,s.jsxs)("span",{className:"font-medium text-amber-500",children:["-",x(A.totalAmount)]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Net Income:"}),(0,s.jsx)("span",{className:"font-medium",children:x(f)})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Total Expenses:"}),(0,s.jsxs)("span",{className:"font-medium text-red-500",children:["-",x(j)]})]}),(0,s.jsx)("div",{className:"h-px bg-border my-2"}),(0,s.jsxs)("div",{className:"flex justify-between items-center font-semibold",children:[(0,s.jsx)("span",{children:"Net Savings:"}),(0,s.jsx)("span",{className:T[E],children:x(y)})]}),r.enabled&&"simple"!==r.country&&p>0&&(0,s.jsx)("div",{className:"flex justify-between items-center text-xs text-muted-foreground mt-1 mb-2",children:(0,s.jsxs)("span",{children:["Tax based on annual income: ",x("annually"===i?p:"monthly"===i?12*p:"fortnightly"===i?26*p:52*p)]})})]})}),(0,s.jsx)(m,{value:"flow",className:"mt-4",children:(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium mb-4 flex items-center gap-2",children:["Income Flow Visualization",r.enabled&&"simple"!==r.country&&(0,s.jsxs)("span",{className:"flex items-center text-xs text-muted-foreground gap-1",children:["using",(0,s.jsx)("span",{role:"img","aria-label":r.country,children:eK[r.country]}),(0,e$.PV)(r.country).name," tax system"]})]}),(0,s.jsx)(e5,{displayPeriod:i}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["The flow diagram shows how income is distributed across expenses, taxes, and savings.",r.enabled&&"simple"!==r.country&&(0,s.jsxs)("span",{children:[" Tax is calculated using ",(0,e$.PV)(r.country).name," progressive tax brackets."]})]})]})})]})})]})}var e3=a(29869),e8=a(57434),e9=a(85339),e7=a(43453),te=a(60408),tt=a.n(te),ta=a(29882);async function ts(e,t){if(!t)return e.map(e=>({...e,suggestedCategory:tr(e.description),confidence:.5}));try{var a,s;let n=new ta.Ay({apiKey:t,dangerouslyAllowBrowser:!0}),r=["Food","Housing","Transportation","Entertainment","Healthcare","Utilities","Shopping","Education","Travel","Other"],l="\nYou are a financial categorization expert. For each transaction description provided, categorize it into one of these categories: ".concat(r.join(", "),".\n\nAlso provide a confidence score from 0.0 to 1.0 for each categorization.\n\nTransactions to categorize:\n").concat(e.map((e,t)=>"".concat(t+1,". ").concat(e.description," ($").concat(e.amount,")")).join("\n"),'\n\nPlease respond with a JSON array where each object has:\n{\n  "index": number (1-based),\n  "category": string (one of the valid categories),\n  "confidence": number (0.0 to 1.0),\n  "reasoning": string (brief explanation)\n}\n\nConsider:\n- Food includes restaurants, groceries, delivery services\n- Housing includes rent, mortgage, utilities related to home\n- Transportation includes fuel, public transport, rideshare, parking\n- Entertainment includes movies, streaming, games, concerts\n- Healthcare includes medical, pharmacy, insurance\n- Utilities includes electricity, water, gas, internet, phone\n- Shopping includes retail, online purchases, clothing\n- Education includes tuition, books, courses\n- Travel includes flights, hotels, vacation expenses\n- Other for anything that doesn\'t clearly fit above categories\n\nBe precise and consistent with categorization.\n'),i=await n.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"user",content:l}],temperature:.1,max_tokens:2e3}),o=null===(s=i.choices[0])||void 0===s?void 0:null===(a=s.message)||void 0===a?void 0:a.content;if(!o)throw Error("No response from OpenAI");let c=[];try{let e=o.match(/\[[\s\S]*\]/);c=e?JSON.parse(e[0]):JSON.parse(o)}catch(t){return console.error("Failed to parse categorization response:",t),e.map(e=>({...e,suggestedCategory:tr(e.description),confidence:.5}))}return e.map((e,t)=>{let a=c.find(e=>e.index===t+1);return a&&r.includes(a.category)?{...e,suggestedCategory:a.category,confidence:Math.max(0,Math.min(1,a.confidence))}:{...e,suggestedCategory:tr(e.description),confidence:.5}})}catch(t){return console.error("Error in smart categorization:",t),e.map(e=>({...e,suggestedCategory:tr(e.description),confidence:.5}))}}let tn={restaurant:"Food",cafe:"Food",coffee:"Food",starbucks:"Food",mcdonald:"Food",kfc:"Food",subway:"Food",pizza:"Food","uber eats":"Food",doordash:"Food",deliveroo:"Food",menulog:"Food",grocery:"Food",supermarket:"Food",woolworths:"Food",coles:"Food",aldi:"Food",iga:"Food",safeway:"Food","trader joe":"Food","whole foods":"Food",bakery:"Food",butcher:"Food",deli:"Food",market:"Food",food:"Food",dining:"Food",lunch:"Food",dinner:"Food",breakfast:"Food",rent:"Housing",mortgage:"Housing",landlord:"Housing",apartment:"Housing",property:"Housing","real estate":"Housing","home loan":"Housing",strata:"Housing","body corporate":"Housing","council rates":"Housing","property tax":"Housing",homeowners:"Housing",rental:"Housing",uber:"Transportation",lyft:"Transportation",taxi:"Transportation",fuel:"Transportation",petrol:"Transportation","gas station":"Transportation",shell:"Transportation",bp:"Transportation",caltex:"Transportation",parking:"Transportation",toll:"Transportation",metro:"Transportation",train:"Transportation",bus:"Transportation",transport:"Transportation","car service":"Transportation",automotive:"Transportation",mechanic:"Transportation","car wash":"Transportation",registration:"Transportation","insurance car":"Transportation",netflix:"Entertainment",spotify:"Entertainment",disney:"Entertainment","amazon prime":"Entertainment",hulu:"Entertainment",cinema:"Entertainment",movie:"Entertainment",theater:"Entertainment",theatre:"Entertainment",concert:"Entertainment",festival:"Entertainment",gaming:"Entertainment",steam:"Entertainment",playstation:"Entertainment",xbox:"Entertainment",nintendo:"Entertainment",entertainment:"Entertainment",gym:"Entertainment",fitness:"Entertainment",sports:"Entertainment",club:"Entertainment",bar:"Entertainment",pub:"Entertainment",doctor:"Healthcare",dentist:"Healthcare",pharmacy:"Healthcare",chemist:"Healthcare",hospital:"Healthcare",medical:"Healthcare",health:"Healthcare",medicare:"Healthcare",bupa:"Healthcare",medibank:"Healthcare",physiotherapy:"Healthcare",optometrist:"Healthcare",specialist:"Healthcare",pathology:"Healthcare",radiology:"Healthcare",prescription:"Healthcare",clinic:"Healthcare",electricity:"Utilities",water:"Utilities","gas utility":"Utilities",internet:"Utilities",phone:"Utilities",mobile:"Utilities",telstra:"Utilities",optus:"Utilities",vodafone:"Utilities",tpg:"Utilities",iinet:"Utilities",nbn:"Utilities",agl:"Utilities",origin:"Utilities","energy australia":"Utilities",utility:"Utilities",council:"Utilities","water corporation":"Utilities",amazon:"Shopping",ebay:"Shopping",target:"Shopping",kmart:"Shopping",myer:"Shopping","david jones":"Shopping","big w":"Shopping","jb hi-fi":"Shopping","harvey norman":"Shopping",bunnings:"Shopping",ikea:"Shopping",retail:"Shopping",shopping:"Shopping",clothing:"Shopping",fashion:"Shopping",electronics:"Shopping","home depot":"Shopping",walmart:"Shopping",costco:"Shopping","online purchase":"Shopping",tuition:"Education",university:"Education",school:"Education",course:"Education",textbook:"Education",education:"Education",student:"Education",training:"Education",workshop:"Education",certification:"Education",udemy:"Education",coursera:"Education",skillshare:"Education",masterclass:"Education",flight:"Travel",airline:"Travel",jetstar:"Travel",qantas:"Travel",virgin:"Travel",hotel:"Travel",motel:"Travel",airbnb:"Travel","booking.com":"Travel",expedia:"Travel",holiday:"Travel",vacation:"Travel",travel:"Travel",tourism:"Travel",cruise:"Travel","rental car":"Travel",airport:"Travel"};function tr(e){let t=e.toLowerCase();for(let[e,a]of Object.entries(tn))if(t.includes(e))return a;return"Other"}async function tl(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(!t||e.length<=a)return ts(e,t||"");let s=[];for(let n=0;n<e.length;n+=a){let r=e.slice(n,n+a),l=await ts(r,t);s.push(...l),n+a<e.length&&await new Promise(e=>setTimeout(e,1e3))}return s}let ti={restaurant:"Food",cafe:"Food","uber eats":"Food",doordash:"Food",grocery:"Food",supermarket:"Food",woolworths:"Food",coles:"Food",aldi:"Food",rent:"Housing",mortgage:"Housing",landlord:"Housing",apartment:"Housing",uber:"Transportation",lyft:"Transportation",taxi:"Transportation",fuel:"Transportation",petrol:"Transportation","gas station":"Transportation",parking:"Transportation",netflix:"Entertainment",spotify:"Entertainment",cinema:"Entertainment",movie:"Entertainment",theater:"Entertainment",concert:"Entertainment",doctor:"Healthcare",pharmacy:"Healthcare",hospital:"Healthcare",medical:"Healthcare",electricity:"Utilities",water:"Utilities",gas:"Utilities",internet:"Utilities",phone:"Utilities",mobile:"Utilities",amazon:"Shopping",ebay:"Shopping",target:"Shopping",kmart:"Shopping",myer:"Shopping","big w":"Shopping",tuition:"Education",university:"Education",school:"Education",course:"Education",textbook:"Education",flight:"Travel",hotel:"Travel",airbnb:"Travel",holiday:"Travel",vacation:"Travel"},to=e=>{let t=e.toLowerCase();for(let[e,a]of Object.entries(ti))if(t.includes(e))return a;return"Other"},tc=e=>new Promise((t,a)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=e=>a(e)});function td(){let{addExpense:e,addExpenses:t}=(0,h.g)(),[a,r]=(0,n.useState)(!1),[l,i]=(0,n.useState)([]),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)(null),[p,f]=(0,n.useState)(null),[g,y]=(0,n.useState)(""),[k,F]=(0,n.useState)(!1),[A,E]=(0,n.useState)(!1),[T,D]=(0,n.useState)(!1),[P,I]=(0,n.useState)(!1),z=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=localStorage.getItem("openai-api-key");e&&y(e),"true"===localStorage.getItem("pdf-processing-enabled")&&D(!0)},[]),(0,n.useEffect)(()=>{localStorage.setItem("pdf-processing-enabled",T.toString()),console.log("PDF processing setting saved to localStorage:",T),z.current&&(z.current.accept=T?".csv,.pdf,application/pdf,text/csv":".csv,text/csv",console.log("Updated file input accept attribute:",z.current.accept)),x(null)},[T]);let q=(0,n.useCallback)(e=>{e.preventDefault(),r(!1),x(null);let t=e.dataTransfer.files;0!==t.length&&(console.log("File dropped, PDF processing enabled:",T),U(t))},[T]),M=(0,n.useCallback)(e=>{e.preventDefault(),r(!0)},[]),V=(0,n.useCallback)(()=>{r(!1)},[]),O=(0,n.useCallback)(e=>{let t=e.target.files;t&&0!==t.length&&(console.log("File selected via input, PDF processing enabled:",T),U(t),e.target.value="")},[T]),U=e=>{u(!0),x(null);let t=e[0];console.log("Processing file:",t.name,"Type:",t.type),console.log("PDF processing enabled state:",T);let a=t.name.toLowerCase(),s=t.type.toLowerCase(),n=s.includes("pdf")||a.endsWith(".pdf"),r=s.includes("csv")||a.endsWith(".csv");if(console.log("File type detection - isPDF:",n,"isCSV:",r,"fileType:",s,"fileName:",a),r)H(t);else if(n){if(T){if(console.log("PDF processing is enabled, continuing with processing"),!g){console.log("No API key found, showing dialog"),E(!0),u(!1);return}console.log("Processing PDF with API key"),R(t)}else console.log("PDF file detected but PDF processing is NOT enabled"),x('PDF processing is not enabled. Please toggle "Enable PDF Import" to process PDF files.'),u(!1)}else{let e=T?"CSV and PDF":"CSV";x("File type not supported. Only ".concat(e," files are accepted. Received file: ").concat(t.name," (").concat(t.type,")")),u(!1)}},H=e=>{tt().parse(e,{header:!0,skipEmptyLines:!0,complete:async e=>{try{let t=W(e.data),a=await es(t);i(a),c(!0),u(!1)}catch(e){x("Failed to process the CSV file. Please check the format."),u(!1)}},error:e=>{x("Error parsing CSV file: ".concat(e.message)),u(!1)}})},R=async e=>{console.log("Extracting transactions from PDF using OpenAI Assistants API..."),x(""),u(!0);try{let a=await tc(e),s=atob(a.split(",")[1]),n=Array(s.length);for(let e=0;e<s.length;e++)n[e]=s.charCodeAt(e);let r=new Uint8Array(n),l=new Blob([r],{type:"application/pdf"}),o=new File([l],"statement.pdf",{type:"application/pdf"}),d=new ta.Ay({apiKey:g,dangerouslyAllowBrowser:!0}),m=await d.files.create({file:o,purpose:"assistants"});console.log("File uploaded:",m);let h=await d.beta.assistants.create({name:"Transaction Extractor",instructions:"\n          You are a specialized assistant for extracting transaction data from bank statements and credit card PDFs.\n          Your goal is to extract all transaction information and return it as a JSON array.\n          \n          Focus on extracting:\n          1. Date (in YYYY-MM-DD format)\n          2. Description (the merchant or transaction description)\n          3. Amount (as a positive number for expenses, negative for income)\n          \n          Only extract debit/expense transactions (money going out).\n          Format your output as a valid JSON array of objects with the fields: date, description, and amount.\n          \n          Australian bank statements (Westpac, ANZ, Commonwealth, NAB) typically show dates in DD/MM/YYYY format. \n          Convert them to YYYY-MM-DD format for the output.\n        ",model:"gpt-4o",tools:[{type:"file_search"}]});console.log("Assistant created:",h);let p=await d.beta.threads.create();console.log("Thread created:",p),await d.beta.threads.messages.create(p.id,{role:"user",content:"Extract all expense/debit transactions from this bank statement and format them as a JSON array with date (YYYY-MM-DD), description, and amount fields. The amount should be a positive number representing the expense amount.",attachments:[{file_id:m.id,tools:[{type:"file_search"}]}]});let f=await d.beta.threads.runs.create(p.id,{assistant_id:h.id}),j=await d.beta.threads.runs.retrieve(p.id,f.id);for(;"completed"!==j.status&&"failed"!==j.status;)if(console.log("Run status:",j.status),await new Promise(e=>setTimeout(e,1e3)),j=await d.beta.threads.runs.retrieve(p.id,f.id),"failed"===j.status){var t;throw Error("Run failed: ".concat((null===(t=j.last_error)||void 0===t?void 0:t.message)||"Unknown error"))}let y=(await d.beta.threads.messages.list(p.id)).data.filter(e=>"assistant"===e.role)[0];if(!y)throw Error("No response from the assistant");console.log("Assistant response:",y);let v=null;if(y.content&&y.content.length>0){for(let e of y.content)if("text"===e.type){let t=e.text.value;console.log("Trying to extract JSON from:",t);try{let e=t.match(/\[\s*\{[\s\S]*\}\s*\]/g);if(e)v=JSON.parse(e[0]);else{let e=t.match(/```(?:json)?\s*([\s\S]*?)```/);e&&(v=JSON.parse(e[1]))}}catch(e){console.error("Error parsing JSON:",e)}}}let b=[];if(v&&Array.isArray(v))b=v.map((e,t)=>{let a=e.date?new Date(e.date):new Date,s="string"==typeof e.amount?parseFloat(e.amount):e.amount;return{id:"import-pdf-".concat(t,"-").concat(Date.now()),date:a,description:e.description||"Unknown",amount:s,category:to(e.description||""),selected:!0}});else throw Error("No valid transaction data found in the response");console.log("Extracted transactions:",b);try{await d.files.del(m.id),console.log("File deleted")}catch(e){console.error("Error deleting file:",e)}if(0===b.length){x("No transactions found in the PDF. Try uploading a CSV file instead."),u(!1);return}u(!1),i(b),c(!0)}catch(t){console.error("Error extracting transactions from PDF:",t);let e=t instanceof Error?t.message:"Unknown error";x("Failed to extract transactions from PDF: ".concat(e,". Try uploading a CSV file instead.")),u(!1)}},W=e=>{if(0===e.length)throw Error("No data found in the file");let t=Object.keys(e[0]).map(e=>e.toLowerCase()),a=t.find(e=>e.includes("date")||e.includes("time")||"posted"===e||"transaction date"===e),s=t.find(e=>e.includes("description")||e.includes("narrative")||e.includes("details")||e.includes("merchant")||e.includes("payee")),n=t.find(e=>e.includes("amount")||e.includes("debit")||e.includes("credit")||e.includes("value")||e.includes("sum"));if(!a||!s||!n)throw Error("Could not identify required columns in the CSV");return e.map((e,t)=>{let r,l=parseFloat(e[n].replace(/[^\d.-]/g,""));if(!(l<0))return null;l=Math.abs(l);let i=e[s],o=e[a];try{if(r=new Date(o),isNaN(r.getTime()))throw Error("Invalid date")}catch(e){r=new Date}return{id:"import-".concat(t,"-").concat(Date.now()),date:r,description:i,amount:l,category:to(i),selected:!0}}).filter(Boolean)},J=(e,t)=>{i(a=>a.map(a=>a.id===e?{...a,category:t}:a))},$=(0,n.useCallback)(e=>{i(t=>t.map(t=>t.id===e?{...t,selected:!t.selected}:t))},[]);(0,n.useEffect)(()=>{console.log("TransactionImport mounted, checking context"),console.log("addExpense function from context:",e),console.log("addExpenses function from context:",t),e&&"function"==typeof e?console.log("addExpense appears to be a valid function"):console.warn("addExpense is not available or not a function"),t&&"function"==typeof t?console.log("addExpenses (batch) appears to be a valid function"):console.warn("addExpenses (batch) is not available or not a function")},[e,t]);let ea=(0,n.useCallback)(()=>{console.log("Direct import triggered");try{let e=l.filter(e=>e.selected);if(!t||"function"!=typeof t){console.error("Context issue: addExpenses is not a function:",t),x("Internal error: batch import function not available");return}if(0===e.length){console.warn("No transactions selected"),x("Please select at least one transaction to import");return}console.log("Attempting to batch import ".concat(e.length," transactions"));let a=e.map(e=>({description:e.description,amount:e.amount,category:e.category,frequency:"monthly"}));t(a),console.log("Batch import completed"),c(!1),i([]),f("Successfully imported ".concat(e.length," transactions")),setTimeout(()=>{f(null)},3e3)}catch(e){console.error("Direct import failed:",e),x("Import failed: ".concat(e instanceof Error?e.message:String(e)))}},[l,t]),es=async e=>{if(!P||!g)return e;u(!0),x(null);try{let t=e.map(e=>({description:e.description,amount:e.amount})),a=await tl(t,g),s=e.map((e,t)=>{let s=a[t];return s?{...e,category:s.suggestedCategory,confidence:s.confidence}:e});return f("Smart categorization applied! Average confidence: ".concat((a.reduce((e,t)=>e+t.confidence,0)/a.length*100).toFixed(1),"%")),setTimeout(()=>f(null),5e3),s}catch(t){return console.error("Smart categorization failed:",t),x("Smart categorization failed. Using basic categorization."),setTimeout(()=>x(null),5e3),e}finally{u(!1)}},en=()=>{if(""===g.trim()){x("API Key cannot be empty");return}localStorage.setItem("openai-api-key",g),E(!1),u(!0);let e=document.getElementById("file-input");(null==e?void 0:e.files)&&e.files.length>0?R(e.files[0]):(u(!1),x("Please select a PDF file again"))},el=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e),ei=["Food","Housing","Transportation","Entertainment","Healthcare","Utilities","Shopping","Education","Travel","Other"];return(0,s.jsxs)(v,{className:"w-full",children:[(0,s.jsxs)(b,{children:[(0,s.jsxs)(N,{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:"Import Transactions"}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eB,{id:"pdf-processing",checked:T,onCheckedChange:()=>{let e=!T;console.log("Toggling PDF processing from ".concat(T," to ").concat(e)),D(e),e?f("PDF Import Enabled - You can now upload PDF files"):f("PDF Import Disabled"),setTimeout(()=>{f(null)},3e3)}}),(0,s.jsxs)(C,{htmlFor:"pdf-processing",className:"text-sm font-normal cursor-pointer ".concat(T?"text-primary font-semibold":""),children:["Enable PDF Import ",T&&"(On)"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eB,{id:"smart-categorization",checked:P,onCheckedChange:I,disabled:!g}),(0,s.jsxs)(C,{htmlFor:"smart-categorization",className:"text-sm font-normal cursor-pointer ".concat(P?"text-primary font-semibold":""),children:["Smart Categorization ",P&&"(On)"]})]})]})]}),(0,s.jsxs)(w,{children:["Drag and drop your bank statement or credit card CSV",T?" or PDF":""," to import transactions",T&&(0,s.jsx)("span",{className:"ml-1 text-primary",children:"(PDF import is enabled)"})]})]}),(0,s.jsxs)(S,{children:[(0,s.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center ".concat(a?"border-primary bg-primary/10":"border-border"," transition-colors duration-200 cursor-pointer relative"),onDragOver:M,onDragLeave:V,onDrop:q,onClick:()=>{var e;return null===(e=document.getElementById("file-input"))||void 0===e?void 0:e.click()},children:[(0,s.jsx)("input",{type:"file",id:"file-input",ref:z,className:"hidden",accept:T?".csv,.pdf,application/pdf,text/csv":".csv,text/csv",onChange:O}),T?(0,s.jsxs)("div",{className:"flex justify-center mb-4",children:[(0,s.jsx)(e3.A,{className:"w-8 h-8 text-muted-foreground mr-2"}),(0,s.jsx)(e8.A,{className:"w-8 h-8 text-muted-foreground"})]}):(0,s.jsx)(e3.A,{className:"w-10 h-10 mx-auto mb-4 text-muted-foreground"}),(0,s.jsx)("div",{className:"text-lg font-medium mb-1",children:a?"Drop your file here":"Drag & drop your ".concat(T?"CSV or PDF":"CSV"," file here")}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground mb-4",children:["or click to browse files ",T?"(CSV and PDF supported)":"(only CSV format supported)"]}),T&&!g&&(0,s.jsxs)("div",{className:"mt-2 mb-2 text-sm text-amber-500 flex items-center justify-center gap-1",children:[(0,s.jsx)(e9.A,{className:"w-4 h-4"}),"OpenAI API key required for PDF processing. ",(0,s.jsx)(j,{onClick:()=>F(!0),variant:"link",className:"p-0 h-auto text-amber-500 underline",children:"Configure now"})]}),d&&(0,s.jsx)("div",{className:"mt-4 text-sm text-muted-foreground",children:"Processing file..."}),m&&(0,s.jsxs)("div",{className:"mt-4 text-sm text-red-500 flex items-center justify-center gap-1",children:[(0,s.jsx)(e9.A,{className:"w-4 h-4"}),m]}),p&&(0,s.jsxs)("div",{className:"mt-4 text-sm text-green-500 flex items-center justify-center gap-1",children:[(0,s.jsx)(e7.A,{className:"w-4 h-4"}),p]})]}),T&&(0,s.jsx)("div",{className:"flex justify-end mt-4",children:(0,s.jsx)(j,{variant:"outline",size:"sm",onClick:()=>F(!k),children:k?"Hide API Key Settings":"Show API Key Settings"})}),T&&k&&(0,s.jsxs)("div",{className:"mt-4 p-4 border rounded-md",children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"OpenAI API Key Settings"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"PDF processing requires an OpenAI API key with GPT-4 Vision access. Your key is stored locally in your browser and never sent to our servers."}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"password",value:g,onChange:e=>y(e.target.value),placeholder:"Enter your OpenAI API key",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 flex-1"}),(0,s.jsx)(j,{onClick:en,children:"Save"})]})]}),(0,s.jsxs)("div",{className:"mt-4 text-sm text-muted-foreground",children:[(0,s.jsx)("h3",{className:"font-medium mb-2",children:"Supported formats:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,s.jsx)("li",{children:"Most major bank CSVs (Commonwealth, ANZ, Westpac, NAB)"}),(0,s.jsx)("li",{children:"Credit card statements (Visa, Mastercard, Amex)"}),T&&(0,s.jsx)("li",{children:"Bank and credit card PDF statements"}),(0,s.jsx)("li",{children:"Exported transactions from budgeting apps"})]})]})]}),(0,s.jsx)(er,{open:A,onOpenChange:E,children:(0,s.jsxs)(ec,{className:"sm:max-w-md",children:[(0,s.jsx)(ed,{children:(0,s.jsx)(em,{children:"OpenAI API Key Required"})}),(0,s.jsxs)("div",{className:"space-y-4 py-2",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"PDF processing requires an OpenAI API key with GPT-4 Vision access. Your key is stored locally in your browser and never sent to our servers."}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"api-key-input",className:"text-sm",children:"Your OpenAI API Key"}),(0,s.jsx)("input",{id:"api-key-input",type:"password",value:g,onChange:e=>y(e.target.value),placeholder:"sk-...",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["You need an API key with access to GPT-4 Vision.",(0,s.jsx)("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline ml-1",children:"Get a key from OpenAI"})]})]})]}),(0,s.jsxs)(eu,{children:[(0,s.jsx)(j,{variant:"outline",onClick:()=>E(!1),children:"Cancel"}),(0,s.jsx)(j,{onClick:en,disabled:!g.trim().startsWith("sk-"),children:"Save and Continue"})]})]})}),(0,s.jsx)(er,{open:o,onOpenChange:e=>{e||c(!1)},children:(0,s.jsxs)(ec,{className:"!w-[90vw] !max-w-[90vw] sm:!max-w-[90vw] md:!max-w-[90vw] lg:!max-w-[90vw] xl:!max-w-[90vw] max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(ed,{children:(0,s.jsx)(em,{children:"Review Transactions"})}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"text-sm mb-4 flex justify-between items-center",children:[(0,s.jsxs)("span",{children:["Found ",(0,s.jsx)("strong",{children:l.length})," transactions. Select which ones to import and verify categories."]}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:[l.filter(e=>e.selected).length," selected"]})]}),(0,s.jsxs)(K,{children:[(0,s.jsx)(Z,{children:(0,s.jsxs)(X,{children:[(0,s.jsx)(ee,{className:"w-[50px]",children:"Import"}),(0,s.jsx)(ee,{children:"Date"}),(0,s.jsx)(ee,{children:"Description"}),(0,s.jsx)(ee,{children:"Amount"}),(0,s.jsx)(ee,{children:"Category"}),P&&(0,s.jsx)(ee,{className:"w-[100px]",children:"Confidence"})]})}),(0,s.jsx)(Q,{children:l.map(e=>(0,s.jsxs)(X,{children:[(0,s.jsx)(et,{children:(0,s.jsx)("input",{type:"checkbox",checked:e.selected,onChange:()=>$(e.id),className:"w-4 h-4"})}),(0,s.jsx)(et,{children:e.date.toLocaleDateString()}),(0,s.jsx)(et,{className:"max-w-[300px] truncate",children:e.description}),(0,s.jsx)(et,{children:el(e.amount)}),(0,s.jsx)(et,{children:(0,s.jsxs)(L,{value:e.category,onValueChange:t=>J(e.id,t),disabled:!e.selected,children:[(0,s.jsx)(Y,{className:"w-[150px]",children:(0,s.jsx)(B,{})}),(0,s.jsx)(_,{children:ei.map(e=>(0,s.jsx)(G,{value:e,children:e},e))})]})}),P&&(0,s.jsx)(et,{children:void 0!==e.confidence?(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("div",{className:"text-xs px-2 py-1 rounded ".concat(e.confidence>.8?"bg-green-100 text-green-800":e.confidence>.6?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[(100*e.confidence).toFixed(0),"%"]})}):(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Manual"})})]},e.id))})]})]}),(0,s.jsxs)(eu,{className:"mt-4",children:[(0,s.jsx)(j,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),(0,s.jsxs)("button",{type:"button",className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 ".concat(0===l.filter(e=>e.selected).length?"opacity-50 cursor-not-allowed":""),onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("Import button clicked manually"),ea()},disabled:0===l.filter(e=>e.selected).length,children:["Import ",l.filter(e=>e.selected).length," Transactions"]}),(0,s.jsx)("button",{type:"button",className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 bg-green-600 text-white hover:bg-green-700 h-10 px-4 py-2",onClick:t=>{if(t.preventDefault(),t.stopPropagation(),alert("Test import triggered"),console.log("Test import button clicked"),e&&"function"==typeof e)try{e("Test Transaction",99.99,"Food","monthly"),console.log("Test expense added successfully"),alert("Test expense added successfully!")}catch(e){console.error("Failed to add test expense:",e),alert("Failed to add test expense: "+e)}else console.error("addExpense not available for test button"),alert("addExpense not available for test button")},children:"Test Import"})]})]})})]})}var tu=a(78668);let tm={...e4.k,backgroundColor:"white",color:"black",border:"1px solid #ddd",borderRadius:"4px",boxShadow:"0 1px 10px rgba(0,0,0,0.2)",padding:"8px 12px",fontSize:"14px",minWidth:"150px"};function tx(e){let{grossIncome:t,tax:a,medicare:r,studentLoan:l,superannuation:i,voluntarySuper:o=0,overtime:c=0,fringeBenefits:d=0,salarySacrifice:u=0}=e,{taxConfig:m}=(0,h.g)(),{tooltipData:x,tooltipLeft:p,tooltipTop:f,tooltipOpen:g,showTooltip:j,hideTooltip:y}=(0,e1.A)(),v=e=>{let t=(0,e$.PV)(m.country).currency;return new Intl.NumberFormat("en",{style:"currency",currency:t,maximumFractionDigits:2}).format(e)},b=(0,n.useMemo)(()=>{let e=Math.max(0,a-o*(.325-.15)),s=[{key:"netIncome",label:"Net Income",amount:t-e-r-l-o-u,color:"#7dd3fc"},{key:"tax",label:"Income Tax",amount:e,color:"#fb923c"},{key:"medicare",label:"Medicare Levy",amount:r,color:"#a78bfa"},{key:"studentLoan",label:"Student Loan",amount:l,color:"#fcd34d"},{key:"super",label:"Superannuation",amount:i+o,color:"#4ade80"}];return c>0&&s.push({key:"overtime",label:"Overtime",amount:c,color:"#f87171"}),d>0&&s.push({key:"fringeBenefits",label:"Fringe Benefits",amount:d,color:"#c084fc"}),u>0&&s.push({key:"salarySacrifice",label:"Salary Sacrifice",amount:u,color:"#60a5fa"}),s.filter(e=>e.amount>0)},[t,a,r,l,i,o,c,d,u]),N=(0,n.useMemo)(()=>(0,eC.A)({domain:b.map(e=>e.key),range:b.map(e=>e.color)}),[b]),w=(0,n.useMemo)(()=>b.reduce((e,t)=>e+t.amount,0),[b]),S=(e,t)=>{let a=(0,tu.A)(e)||{x:0,y:0};j({tooltipData:t,tooltipLeft:a.x,tooltipTop:a.y})};return(0,s.jsxs)("div",{className:"relative",style:{minHeight:"360px"},children:[(0,s.jsx)("div",{className:"mb-6 flex justify-center",children:(0,s.jsx)(eE.A,{scale:N,direction:"row",labelFormat:e=>{let t=b.find(t=>t.key===e);return t?t.label:e},labelMargin:"0 15px 0 0",className:"flex flex-wrap justify-center gap-x-4 gap-y-2"})}),(0,s.jsx)(eA.A,{children:e=>{let{width:a}=e,n=Math.min(a,400)/2;return(0,s.jsx)("div",{className:"relative",style:{width:"100%",height:"360px"},children:(0,s.jsx)("svg",{width:a,height:360,children:(0,s.jsxs)(ek.A,{top:180,left:a/2,children:[(0,s.jsx)(eS.A,{data:b,pieValue:e=>e.amount,outerRadius:n-20,innerRadius:.6*n,cornerRadius:3,padAngle:.02,children:e=>e.arcs.map((t,a)=>{let{key:n,amount:r}=t.data,[l,i]=e.path.centroid(t),o=t.endAngle-t.startAngle>.2,c=e.path(t)||"",d=N(n);return(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:c,fill:d,onMouseMove:e=>S(e,t.data),onMouseLeave:()=>y(),onTouchStart:e=>S(e,t.data),onTouchMove:e=>S(e,t.data),className:"transition-opacity duration-200 hover:opacity-80 cursor-pointer"}),o&&(0,s.jsx)(eF.A,{x:l,y:i,dy:".33em",fontSize:14,textAnchor:"middle",fill:"#ffffff",fontWeight:"bold",children:"".concat(Math.round(r/w*100),"%")})]},"pie-arc-".concat(n,"-").concat(a))})}),(0,s.jsx)(eF.A,{textAnchor:"middle",fontSize:20,fontWeight:"bold",dy:-20,children:v(t+i)}),(0,s.jsx)(eF.A,{textAnchor:"middle",fontSize:14,fill:"#6b7280",dy:10,children:"Total Package"})]})})})}}),g&&x&&null!=p&&null!=f&&(0,s.jsxs)(e4.A,{top:f,left:p,style:{...tm,transform:"translate(-50%, -100%)",backgroundColor:"rgba(255, 255, 255, 0.95)"},className:"z-50",children:[(0,s.jsx)("div",{className:"font-bold",style:{color:x.color,fontSize:"16px",marginBottom:"4px"},children:x.label}),(0,s.jsx)("div",{className:"font-bold text-black",children:v(x.amount)}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[(x.amount/w*100).toFixed(1),"% of total"]})]},Math.random()),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2 mt-4",children:b.map(e=>(0,s.jsxs)("div",{className:"p-2 rounded-md text-center",style:{backgroundColor:"".concat(e.color,"20")},children:[(0,s.jsx)("p",{className:"text-xs font-medium",children:e.label}),(0,s.jsx)("p",{className:"text-sm font-bold",children:v(e.amount)}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(e.amount/w*100).toFixed(1),"%"]})]},e.key))})]})}var th=a(26597),tp=a(52699),tf=a.n(tp),tg=a(54073);function tj(e){let{className:t,defaultValue:a,value:r,min:l=0,max:i=100,...c}=e,d=n.useMemo(()=>Array.isArray(r)?r:Array.isArray(a)?a:[l,i],[r,a,l,i]);return(0,s.jsxs)(tg.bL,{"data-slot":"slider",defaultValue:a,value:r,min:l,max:i,className:o("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...c,children:[(0,s.jsx)(tg.CC,{"data-slot":"slider-track",className:o("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,s.jsx)(tg.Q6,{"data-slot":"slider-range",className:o("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:d.length},(e,t)=>(0,s.jsx)(tg.zi,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},t))]})}var ty=a(89613);function tv(e){let{delayDuration:t=0,...a}=e;return(0,s.jsx)(ty.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...a})}function tb(e){let{...t}=e;return(0,s.jsx)(tv,{children:(0,s.jsx)(ty.bL,{"data-slot":"tooltip",...t})})}function tN(e){let{...t}=e;return(0,s.jsx)(ty.l9,{"data-slot":"tooltip-trigger",...t})}function tw(e){let{className:t,sideOffset:a=0,children:n,...r}=e;return(0,s.jsx)(ty.ZL,{children:(0,s.jsxs)(ty.UC,{"data-slot":"tooltip-content",sideOffset:a,className:o("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...r,children:[n,(0,s.jsx)(ty.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var tS=a(81284),tk=a(84616);let tF=[{value:15899,label:"Public hospital/health promotion charity"},{value:18550,label:"Public benevolent institution"},{value:3e4,label:"FBT-exempt organizations"},{value:17e3,label:"Other NFPs"}],tC=[{min:0,max:51550,rate:0},{min:51550,max:59518,rate:.01},{min:59519,max:63089,rate:.02},{min:63090,max:66875,rate:.025},{min:66876,max:70888,rate:.03},{min:70889,max:75140,rate:.035},{min:75141,max:79649,rate:.04},{min:79650,max:84429,rate:.045},{min:84430,max:89494,rate:.05},{min:89495,max:94865,rate:.055},{min:94866,max:100557,rate:.06},{min:100558,max:106591,rate:.065},{min:106592,max:112990,rate:.07},{min:112991,max:119769,rate:.075},{min:119770,max:126955,rate:.08},{min:126956,max:134572,rate:.085},{min:134573,max:142646,rate:.09},{min:142647,max:151204,rate:.095},{min:151205,max:1/0,rate:.1}];function tA(){let{taxConfig:e,updateTaxConfig:t}=(0,h.g)(),[a,r]=(0,n.useState)({includeSuper:!0,superRate:11.5,includeMedicare:!0,medicareExemption:!1,includeSeniorOffset:!1,includeStudentLoan:!1,studentLoanRate:2,includeDependentChildren:!1,includeSpouse:!1,includePrivateHealth:!1,includeVoluntarySuper:!1}),[l,i]=(0,n.useState)([]),[o,p]=(0,n.useState)([]),[f,g]=(0,n.useState)([]),w=(0,x.mN)({defaultValues:{salary:"105000",frequency:"annually",voluntarySuper:"0",isProratedHours:!1,proratedHours:"38",proratedFrequency:"weekly",packagingCap:15899}}),F=w.watch("salary"),E=w.watch("frequency"),D=w.watch("isProratedHours"),P=w.watch("proratedHours"),M=w.watch("proratedFrequency"),O=(0,n.useRef)(null),U=(0,n.useMemo)(()=>{let e=parseFloat(F)||0,t=e;if("weekly"===E?t=52*e:"fortnightly"===E?t=26*e:"monthly"===E&&(t=12*e),D){let e=parseFloat(P)||0;return e/("weekly"===M?38:76)*t}return t},[F,E,D,P,M]),H=(0,n.useMemo)(()=>l.reduce((e,t)=>{let a=(parseFloat(t.hours)||0)*(parseFloat(t.rate)||0);return"weekly"===t.frequency?a*=52:"fortnightly"===t.frequency?a*=26:"monthly"===t.frequency&&(a*=12),e+a},0),[l]),R=(0,n.useMemo)(()=>U+H,[U,H]),W=(0,n.useMemo)(()=>{let t=f.reduce((e,t)=>{let a=parseFloat(t.amount)||0,s=a;return"weekly"===t.frequency?s=52*a:"fortnightly"===t.frequency?s=26*a:"monthly"===t.frequency&&(s=12*a),e+s},0),a=f.filter(e=>e.isTaxDeductible).reduce((e,t)=>{let a=parseFloat(t.amount)||0,s=a;return"weekly"===t.frequency?s=52*a:"fortnightly"===t.frequency?s=26*a:"monthly"===t.frequency&&(s=12*a),e+s},0),s=w.watch("packagingCap"),n=Math.max(0,s-t),r=0;if(a>0){let t=(0,e$.PV)(e.country);r=(0,e$.JE)(R,t.brackets)-(0,e$.JE)(R-a,t.brackets)}let l=a-r;return{totalSalarySacrifice:t,taxDeductibleSacrifice:a,nonTaxDeductibleSacrifice:t-a,remainingPackagingCap:n,estimatedTaxSavings:r,netCashBenefit:l,packagingCap:s}},[f,w,R,e.country]),J=(0,n.useMemo)(()=>{let e=R;return e-=W.taxDeductibleSacrifice,a.includeVoluntarySuper&&(e-=parseFloat(w.watch("voluntarySuper"))||0),Math.max(0,e)},[R,W.taxDeductibleSacrifice,a.includeVoluntarySuper,w]),$=(0,n.useMemo)(()=>{let t=(0,e$.PV)(e.country),a=(0,e$.JE)(J,t.brackets),s=(0,e$.JE)(R,t.brackets),n=s-a;return W.taxDeductibleSacrifice>0&&console.log({grossIncome:R,taxableIncome:J,sacrifice:W.taxDeductibleSacrifice,preSacrificeTax:s,calculatedTax:a,taxSavings:n,netBenefit:W.taxDeductibleSacrifice-n}),a},[J,R,e.country,W.taxDeductibleSacrifice]),K=(0,n.useMemo)(()=>!a.includeMedicare||a.medicareExemption||a.includePrivateHealth?0:.02*J,[J,a.includeMedicare,a.medicareExemption,a.includePrivateHealth]),Z=(0,n.useMemo)(()=>{if(!a.includeStudentLoan)return 0;let e=tC.find(e=>J>=e.min&&J<=e.max);return e?J*e.rate:0},[J,a.includeStudentLoan]),Q=(0,n.useMemo)(()=>{let e=o.filter(e=>"taxable"===e.type).reduce((e,t)=>{let a=parseFloat(t.amount)||0,s=a;return"weekly"===t.frequency?s=52*a:"fortnightly"===t.frequency?s=26*a:"monthly"===t.frequency&&(s=12*a),e+s},0),t=o.filter(e=>"exempt"===e.type).reduce((e,t)=>{let a=parseFloat(t.amount)||0,s=a;return"weekly"===t.frequency?s=52*a:"fortnightly"===t.frequency?s=26*a:"monthly"===t.frequency&&(s=12*a),e+s},0);return{taxableFBT:e,exemptFBT:t,reportableFBT:o.filter(e=>e.reportable).reduce((e,t)=>{let a=parseFloat(t.amount)||0,s=a;return"weekly"===t.frequency?s=52*a:"fortnightly"===t.frequency?s=26*a:"monthly"===t.frequency&&(s=12*a),"taxable"===t.type&&(s=1/.53*s),e+s},0),totalFBT:e+t}},[o]),X=(0,n.useMemo)(()=>{if(!a.includeSuper)return 0;let e=U*(a.superRate/100);return l.forEach(t=>{if(t.includeSuper){let s=(parseFloat(t.hours)||0)*(parseFloat(t.rate)||0);"weekly"===t.frequency?s*=52:"fortnightly"===t.frequency?s*=26:"monthly"===t.frequency&&(s*=12),e+=s*(a.superRate/100)}}),e},[U,H,a.includeSuper,a.superRate,l]),ee=(0,n.useMemo)(()=>Math.max(0,3e4-X),[X]),et=(0,n.useMemo)(()=>a.includeVoluntarySuper?Math.min(parseFloat(w.watch("voluntarySuper"))||0,ee):0,[w.watch("voluntarySuper"),a.includeVoluntarySuper,ee]),ea=(0,n.useMemo)(()=>a.includeVoluntarySuper?et*(.325-.15):0,[et,a.includeVoluntarySuper]),es=(0,n.useMemo)(()=>{let e=R;return e-=$,e-=K,e-=Z,a.includeVoluntarySuper&&(e-=parseFloat(w.watch("voluntarySuper"))||0),e-=W.totalSalarySacrifice,console.log("Net income calculation:",{totalAnnualIncome:R,incomeTax:$,medicareLevy:K,studentLoanRepayment:Z,voluntarySuper:a.includeVoluntarySuper&&parseFloat(w.watch("voluntarySuper"))||0,salarySacrifice:W.totalSalarySacrifice,estimatedTaxSavings:W.estimatedTaxSavings,result:e}),Math.max(0,e)},[R,$,K,Z,a.includeVoluntarySuper,w,W]),en=(0,n.useMemo)(()=>Math.max(0,ee-et),[ee,et]),er=t=>{let a=(0,e$.PV)(e.country).currency;return new Intl.NumberFormat("en",{style:"currency",currency:a,maximumFractionDigits:2}).format(t)},el=(e,t)=>"weekly"===t?e/52:"fortnightly"===t?e/26:"monthly"===t?e/12:e,ei=(0,n.useMemo)(()=>["weekly","fortnightly","monthly","annually"].map(e=>({frequency:e,grossIncome:el(R,e),baseSalary:el(U,e),overtime:el(H,e),tax:el($,e),medicare:el(K,e),studentLoan:el(Z,e),netIncome:el(es,e),superannuation:el(X,e),voluntarySuper:el(et,e),fringeBenefits:el(Q.totalFBT,e),reportableFBT:el(Q.reportableFBT,e),salarySacrifice:el(W.totalSalarySacrifice,e),taxDeductibleSacrifice:el(W.taxDeductibleSacrifice,e)})),[R,U,H,$,K,Z,es,X,et,Q,W]),eo=()=>{if(!a.includeStudentLoan)return"0%";let e=tC.find(e=>J>=e.min&&J<=e.max);return e?"".concat((100*e.rate).toFixed(1),"%"):"0%"},ec=(e,t)=>{r(a=>({...a,[e]:t}))},ed=e=>{i(t=>t.filter(t=>t.id!==e))},eu=(e,t,a)=>{i(s=>s.map(s=>s.id===e?{...s,[t]:a}:s))},em=()=>{if(!D)return null;let e=parseFloat(P)||0,t=Math.round(e/("weekly"===M?38:76)*100);return"You work ".concat(e," hours ").concat(M," or ").concat(t,"% prorata")},ex=async()=>{if(O.current)try{alert("Preparing PDF... Please wait while we generate your report");let e=await tf()(O.current,{scale:2,logging:!1,useCORS:!0}),t=e.toDataURL("image/png"),a=new th.uE({orientation:"portrait",unit:"mm",format:"a4"}),s=a.internal.pageSize.getWidth(),n=e.height*s/e.width;a.addImage(t,"PNG",0,0,s,n),a.save("salary-report-".concat(new Date().toISOString().slice(0,10),".pdf")),alert("PDF Downloaded! Your salary report has been saved")}catch(e){console.error("Error generating PDF:",e),alert("Export Failed: There was an error creating your PDF")}};(0,n.useEffect)(()=>{try{let a=new URLSearchParams(window.location.search).get("calculator");if(a){let s=JSON.parse(atob(a));w.setValue("salary",s.salary),w.setValue("frequency",s.frequency),s.taxSettings&&r(s.taxSettings),s.country&&s.country!==e.country&&t({country:s.country}),alert("Calculator Loaded: The shared calculator settings have been loaded");let n=window.location.pathname;window.history.replaceState({},document.title,n)}}catch(e){console.error("Error loading shared calculator:",e)}},[]),(0,n.useEffect)(()=>{a.includePrivateHealth&&a.includeMedicare&&r(e=>({...e,includeMedicare:!1}))},[a.includePrivateHealth]);let ep=e=>{p(t=>t.filter(t=>t.id!==e))},ef=(e,t,a)=>{p(s=>s.map(s=>s.id===e?{...s,[t]:a}:s))},eg=e=>{g(t=>t.filter(t=>t.id!==e))},ej=(e,t,a)=>{g(s=>s.map(s=>s.id===e?{...s,[t]:a}:s))};return(0,s.jsxs)("div",{className:"flex flex-col space-y-6 SalaryCalculator",ref:O,children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)(v,{children:[(0,s.jsx)(b,{children:(0,s.jsx)(N,{children:"Income"})}),(0,s.jsx)(S,{children:(0,s.jsx)(A,{...w,children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(j,{variant:"outline",size:"sm",onClick:()=>{w.reset({salary:"105000",frequency:"annually",voluntarySuper:"0",isProratedHours:!1,proratedHours:"38",proratedFrequency:"weekly",packagingCap:15899}),r({includeSuper:!0,superRate:11.5,includeMedicare:!0,medicareExemption:!1,includeSeniorOffset:!1,includeStudentLoan:!1,studentLoanRate:0,includeDependentChildren:!1,includeSpouse:!1,includePrivateHealth:!1,includeVoluntarySuper:!1}),i([]),p([]),g([])},className:"text-xs",children:"Reset Calculator"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Tax Year:"}),(0,s.jsx)("span",{className:"text-sm",children:"2024 - 25"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 py-2",children:[(0,s.jsx)(eB,{id:"prorata-switch",checked:w.watch("isProratedHours"),onCheckedChange:e=>w.setValue("isProratedHours",e)}),(0,s.jsx)(C,{htmlFor:"prorata-switch",className:"font-medium",children:"Pro-rata / Part-time hours"})]}),D&&(0,s.jsxs)("div",{className:"p-4 bg-muted/40 rounded-md space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(C,{className:"text-sm",children:"Hours"}),(0,s.jsx)(y,{type:"number",value:P,onChange:e=>w.setValue("proratedHours",e.target.value),className:"mt-1",min:"1",max:"168"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C,{className:"text-sm",children:"each"}),(0,s.jsxs)(L,{value:M,onValueChange:e=>w.setValue("proratedFrequency",e),children:[(0,s.jsx)(Y,{className:"mt-1",children:(0,s.jsx)(B,{placeholder:"Select frequency"})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(G,{value:"weekly",children:"Week"}),(0,s.jsx)(G,{value:"fortnightly",children:"Fortnight"})]})]})]})]}),em()&&(0,s.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground gap-1",children:[(0,s.jsx)("span",{children:em()}),(0,s.jsx)(tv,{children:(0,s.jsxs)(tb,{children:[(0,s.jsx)(tN,{asChild:!0,children:(0,s.jsx)("span",{className:"cursor-help",children:(0,s.jsx)(tS.A,{size:14})})}),(0,s.jsxs)(tw,{className:"max-w-80",children:[(0,s.jsx)("p",{children:"Pro-rata calculation is based on standard full-time hours:"}),(0,s.jsxs)("ul",{className:"list-disc pl-4 mt-1",children:[(0,s.jsx)("li",{children:"38 hours per week"}),(0,s.jsx)("li",{children:"76 hours per fortnight"})]}),(0,s.jsx)("p",{className:"mt-2",children:"Your salary will be adjusted proportionally based on the hours you work."})]})]})})]})]}),(0,s.jsx)(T,{control:w.control,name:"salary",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Annual salary"}),(0,s.jsx)(q,{children:(0,s.jsx)(y,{type:"number",step:"1000",min:"0",placeholder:"Enter your gross salary",...t})}),(0,s.jsx)(V,{})]})}}),(0,s.jsx)(T,{control:w.control,name:"frequency",render:e=>{let{field:t}=e;return(0,s.jsxs)(I,{children:[(0,s.jsx)(z,{children:"Pay Cycle"}),(0,s.jsxs)(L,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(q,{children:(0,s.jsx)(Y,{children:(0,s.jsx)(B,{placeholder:"Select frequency"})})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(G,{value:"weekly",children:"Weekly"}),(0,s.jsx)(G,{value:"fortnightly",children:"Fortnightly"}),(0,s.jsx)(G,{value:"monthly",children:"Monthly"}),(0,s.jsx)(G,{value:"annually",children:"Annually"})]})]}),(0,s.jsx)(V,{})]})}}),(0,s.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,s.jsx)("div",{className:"flex justify-between items-center",children:(0,s.jsx)("h3",{className:"text-base font-semibold uppercase",children:"OVERTIME"})}),l.map(e=>(0,s.jsxs)("div",{className:"space-y-3 p-4 border border-border rounded-md",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"Overtime"}),(0,s.jsx)(j,{variant:"ghost",size:"icon",onClick:()=>ed(e.id),className:"h-6 w-6 text-muted-foreground hover:text-destructive",children:(0,s.jsx)(eh.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(C,{className:"text-xs",children:"Hours"}),(0,s.jsx)(y,{type:"number",value:e.hours,onChange:t=>eu(e.id,"hours",t.target.value),className:"mt-1 h-8 text-sm",min:"0"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C,{className:"text-xs",children:"Rate"}),(0,s.jsx)(y,{type:"number",value:e.rate,onChange:t=>eu(e.id,"rate",t.target.value),className:"mt-1 h-8 text-sm",min:"0",step:"0.01"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C,{className:"text-xs",children:"Per"}),(0,s.jsxs)(L,{value:e.frequency,onValueChange:t=>eu(e.id,"frequency",t),children:[(0,s.jsx)(Y,{className:"mt-1 h-8 text-sm",children:(0,s.jsx)(B,{placeholder:"Select frequency"})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(G,{value:"weekly",children:"Week"}),(0,s.jsx)(G,{value:"fortnightly",children:"Fortnight"}),(0,s.jsx)(G,{value:"monthly",children:"Month"})]})]})]}),(0,s.jsxs)("div",{className:"mt-2 flex justify-between items-center",children:[(0,s.jsx)(C,{htmlFor:"overtime-super-".concat(e.id),className:"text-xs",children:"Include Superannuation"}),(0,s.jsx)(eB,{id:"overtime-super-".concat(e.id),checked:e.includeSuper,onCheckedChange:t=>eu(e.id,"includeSuper",t)})]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[er(parseFloat(e.hours)*parseFloat(e.rate)||0)," per ",e.frequency]})]},e.id)),(0,s.jsxs)(j,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>{let e={id:(0,eY.A)(),hours:"1",rate:"20.00",frequency:"weekly",includeSuper:!0};i(t=>[...t,e])},children:[(0,s.jsx)(tk.A,{className:"h-4 w-4 mr-2"}),"ADD OVERTIME"]})]}),(0,s.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-base font-semibold uppercase",children:"FRINGE BENEFITS"}),(0,s.jsx)(tv,{children:(0,s.jsxs)(tb,{children:[(0,s.jsx)(tN,{asChild:!0,children:(0,s.jsx)("span",{className:"cursor-help",children:(0,s.jsx)(tS.A,{size:14})})}),(0,s.jsxs)(tw,{className:"max-w-80",children:[(0,s.jsx)("p",{children:"Fringe benefits are non-cash benefits provided to employees in addition to salary."}),(0,s.jsx)("p",{className:"mt-2",children:"Examples include company cars, private health insurance, and expense accounts."}),(0,s.jsx)("p",{className:"mt-2",children:"Many fringe benefits are subject to Fringe Benefits Tax (FBT) which is paid by the employer but may affect your reportable income."}),(0,s.jsx)("p",{className:"mt-2",children:"Some organizations (like NFPs and charities) may have an FBT exemption cap that varies by organization."}),(0,s.jsx)("a",{href:"https://www.ato.gov.au/rates/fbt/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline mt-2 block",children:"ATO: Fringe Benefits Tax"})]})]})})]}),o.map(e=>(0,s.jsxs)("div",{className:"space-y-3 p-4 border border-border rounded-md",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"Fringe Benefit"}),(0,s.jsx)(j,{variant:"ghost",size:"icon",onClick:()=>ep(e.id),className:"h-6 w-6 text-muted-foreground hover:text-destructive",children:(0,s.jsx)(eh.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C,{className:"text-xs",children:"Description"}),(0,s.jsx)(y,{type:"text",value:e.description,onChange:t=>ef(e.id,"description",t.target.value),className:"mt-1 h-8 text-sm"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(C,{className:"text-xs",children:"Amount"}),(0,s.jsx)(y,{type:"number",value:e.amount,onChange:t=>ef(e.id,"amount",t.target.value),className:"mt-1 h-8 text-sm",min:"0",step:"0.01"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C,{className:"text-xs",children:"Frequency"}),(0,s.jsxs)(L,{value:e.frequency,onValueChange:t=>ef(e.id,"frequency",t),children:[(0,s.jsx)(Y,{className:"mt-1 h-8 text-sm",children:(0,s.jsx)(B,{placeholder:"Select frequency"})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(G,{value:"weekly",children:"Weekly"}),(0,s.jsx)(G,{value:"fortnightly",children:"Fortnightly"}),(0,s.jsx)(G,{value:"monthly",children:"Monthly"}),(0,s.jsx)(G,{value:"annually",children:"Annually"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(C,{className:"text-xs",children:"Type"}),(0,s.jsxs)(L,{value:e.type,onValueChange:t=>ef(e.id,"type",t),children:[(0,s.jsx)(Y,{className:"mt-1 h-8 text-sm",children:(0,s.jsx)(B,{placeholder:"Select type"})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(G,{value:"taxable",children:"Taxable"}),(0,s.jsx)(G,{value:"exempt",children:"Exempt"})]})]})]}),(0,s.jsx)("div",{className:"flex items-end pb-1",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eB,{id:"fbt-reportable-".concat(e.id),checked:e.reportable,onCheckedChange:t=>ef(e.id,"reportable",t)}),(0,s.jsx)(C,{htmlFor:"fbt-reportable-".concat(e.id),className:"text-xs",children:"Reportable"})]})})]})]},e.id)),(0,s.jsxs)(j,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>{let e={id:(0,eY.A)(),description:"Car Benefit",amount:"1000",frequency:"annually",type:"taxable",reportable:!0};p(t=>[...t,e])},children:[(0,s.jsx)(tk.A,{className:"h-4 w-4 mr-2"}),"ADD FRINGE BENEFIT"]})]}),(0,s.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-base font-semibold uppercase",children:"SALARY SACRIFICE"}),(0,s.jsx)(tv,{children:(0,s.jsxs)(tb,{children:[(0,s.jsx)(tN,{asChild:!0,children:(0,s.jsx)("span",{className:"cursor-help",children:(0,s.jsx)(tS.A,{size:14})})}),(0,s.jsxs)(tw,{className:"max-w-80",children:[(0,s.jsx)("p",{children:"Salary sacrificing allows you to redirect part of your pre-tax salary toward benefits like car leases or additional super."}),(0,s.jsx)("p",{className:"mt-2",children:"Tax-deductible sacrifices reduce your taxable income."}),(0,s.jsx)("p",{className:"mt-2",children:"Many NFPs and charities offer salary packaging with caps that vary by organization type."}),(0,s.jsx)("a",{href:"https://www.ato.gov.au/individuals/income-and-deductions/income-you-must-declare/salary-and-wages/salary-sacrifice-arrangements/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline mt-2 block",children:"ATO: Salary Sacrifice Arrangements"})]})]})})]}),(0,s.jsxs)("div",{className:"bg-muted/30 p-3 rounded-md",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)(C,{className:"text-sm",children:"Salary Packaging Cap"}),(0,s.jsx)(tv,{children:(0,s.jsxs)(tb,{children:[(0,s.jsx)(tN,{asChild:!0,children:(0,s.jsx)("span",{className:"cursor-help",children:(0,s.jsx)(tS.A,{size:14})})}),(0,s.jsxs)(tw,{className:"max-w-80",children:[(0,s.jsx)("p",{children:"Common salary packaging caps:"}),(0,s.jsx)("ul",{className:"list-disc pl-4 mt-1",children:tF.map(e=>(0,s.jsxs)("li",{children:[e.label,": $",e.value.toLocaleString()]},e.value))}),(0,s.jsx)("p",{className:"mt-2",children:"Enter your organization's specific cap amount."})]})]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"$"}),(0,s.jsx)(y,{type:"number",value:w.watch("packagingCap"),onChange:e=>w.setValue("packagingCap",parseInt(e.target.value)||0),className:"h-8 text-sm",min:"0",step:"100",placeholder:"Enter packaging cap"}),(0,s.jsx)(j,{type:"button",variant:"outline",size:"sm",onClick:()=>w.setValue("packagingCap",15899),className:"text-xs",children:"Default"})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Set to 0 for no cap, or enter your organization's specific cap amount"})]}),f.length>0&&(0,s.jsxs)("div",{className:"bg-muted/30 p-3 rounded-md text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Annual cap:"}),(0,s.jsx)("span",{className:"font-medium",children:er(W.packagingCap)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Used:"}),(0,s.jsx)("span",{className:"font-medium",children:er(W.totalSalarySacrifice)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Remaining:"}),(0,s.jsx)("span",{className:"font-medium",children:er(W.remainingPackagingCap)})]}),(0,s.jsxs)("div",{className:"mt-3 pt-2 border-t",children:[(0,s.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,s.jsx)("span",{children:"Tax savings:"}),(0,s.jsx)("span",{className:"font-medium",children:er(W.estimatedTaxSavings)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,s.jsx)("span",{children:"Tax savings per fortnight:"}),(0,s.jsx)("span",{className:"font-medium",children:er(W.estimatedTaxSavings/26)})]}),(0,s.jsxs)("div",{className:"mt-3 pt-2 border-t",children:[(0,s.jsx)("div",{className:"text-xs uppercase font-medium text-muted-foreground mb-2",children:"SALARY PACKAGE BREAKDOWN"}),(0,s.jsxs)("div",{className:"p-3 bg-slate-50 dark:bg-slate-900 rounded-sm space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"font-medium",children:"Package amount:"}),(0,s.jsx)("span",{className:"font-medium",children:er(W.totalSalarySacrifice)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,s.jsx)("span",{children:"Plus tax savings:"}),(0,s.jsx)("span",{children:er(W.estimatedTaxSavings)})]}),(0,s.jsxs)("div",{className:"flex justify-between font-medium pt-1 border-t",children:[(0,s.jsx)("span",{children:"Total benefit:"}),(0,s.jsx)("span",{children:er(W.totalSalarySacrifice+W.estimatedTaxSavings)})]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground pt-2",children:"Your salary package provides two benefits: (1) the direct package amount and (2) tax savings from reduced taxable income."})]}),(0,s.jsx)("div",{className:"text-xs uppercase font-medium text-muted-foreground mt-4 mb-2",children:"PACKAGE PAYMENT DETAILS"}),f.map(e=>{let t=parseFloat(e.amount)||0;return(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{children:[e.description,":"]}),(0,s.jsxs)("span",{className:"font-medium",children:[er(t)," per ",e.frequency]})]},e.id)}),(0,s.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,s.jsx)("span",{children:"Plus tax savings:"}),(0,s.jsxs)("span",{className:"font-medium",children:[er(W.estimatedTaxSavings/26)," per fortnight"]})]}),(0,s.jsxs)("div",{className:"flex justify-between font-medium mt-2",children:[(0,s.jsx)("span",{children:"Total effective payment:"}),(0,s.jsxs)("span",{children:[er(f.reduce((e,t)=>{let a=parseFloat(t.amount)||0;return"fortnightly"===t.frequency?e+a:"weekly"===t.frequency?e+2*a:"monthly"===t.frequency?e+a/2.167:e+a/26},0)+W.estimatedTaxSavings/26)," per fortnight"]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between font-medium mt-3",children:[(0,s.jsx)("span",{children:"Total annual benefit:"}),(0,s.jsx)("span",{children:er(W.totalSalarySacrifice+W.estimatedTaxSavings)})]})]})]}),f.map(e=>(0,s.jsxs)("div",{className:"space-y-3 p-4 border border-border rounded-md",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"Salary Sacrifice"}),(0,s.jsx)(j,{variant:"ghost",size:"icon",onClick:()=>eg(e.id),className:"h-6 w-6 text-muted-foreground hover:text-destructive",children:(0,s.jsx)(eh.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C,{className:"text-xs",children:"Description"}),(0,s.jsx)(y,{type:"text",value:e.description,onChange:t=>ej(e.id,"description",t.target.value),className:"mt-1 h-8 text-sm"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(C,{className:"text-xs",children:"Amount"}),(0,s.jsx)(y,{type:"number",value:e.amount,onChange:t=>ej(e.id,"amount",t.target.value),className:"mt-1 h-8 text-sm",min:"0",step:"0.01"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C,{className:"text-xs",children:"Frequency"}),(0,s.jsxs)(L,{value:e.frequency,onValueChange:t=>ej(e.id,"frequency",t),children:[(0,s.jsx)(Y,{className:"mt-1 h-8 text-sm",children:(0,s.jsx)(B,{placeholder:"Select frequency"})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(G,{value:"weekly",children:"Weekly"}),(0,s.jsx)(G,{value:"fortnightly",children:"Fortnightly"}),(0,s.jsx)(G,{value:"monthly",children:"Monthly"}),(0,s.jsx)(G,{value:"annually",children:"Annually"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(C,{htmlFor:"tax-deductible-".concat(e.id),className:"text-xs",children:"Tax Deductible"}),(0,s.jsx)(eB,{id:"tax-deductible-".concat(e.id),checked:e.isTaxDeductible,onCheckedChange:t=>ej(e.id,"isTaxDeductible",t)})]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:["fortnightly"!==e.frequency&&(0,s.jsxs)("div",{children:["Equals ",er("weekly"===e.frequency?2*parseFloat(e.amount):"monthly"===e.frequency?parseFloat(e.amount)/2.167:parseFloat(e.amount)/26)," per fortnight"]}),"annually"!==e.frequency&&(0,s.jsxs)("div",{children:["Equals ",er("weekly"===e.frequency?52*parseFloat(e.amount):"fortnightly"===e.frequency?26*parseFloat(e.amount):12*parseFloat(e.amount))," per year"]})]})]},e.id)),(0,s.jsxs)(j,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>{let e={id:(0,eY.A)(),description:"Salary Package",amount:0===f.length?"611":"110",frequency:"fortnightly",isTaxDeductible:!0};g(t=>[...t,e])},disabled:W.remainingPackagingCap<=0&&W.packagingCap>0,children:[(0,s.jsx)(tk.A,{className:"h-4 w-4 mr-2"}),"ADD SALARY SACRIFICE"]})]}),(0,s.jsxs)("div",{className:"space-y-3 mt-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eB,{checked:a.includeSuper,onCheckedChange:e=>ec("includeSuper",e)}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Salary includes Superannuation"})]}),a.includeSuper&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm",children:"at"}),(0,s.jsx)(y,{type:"number",value:a.superRate,onChange:e=>ec("superRate",parseFloat(e.target.value)||0),className:"w-16 h-8 text-xs",step:"0.5",min:"0",max:"50"}),(0,s.jsx)("span",{className:"text-sm",children:"%"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eB,{checked:a.includeStudentLoan,onCheckedChange:e=>ec("includeStudentLoan",e)}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Student loan"}),(0,s.jsx)(tv,{children:(0,s.jsxs)(tb,{children:[(0,s.jsx)(tN,{asChild:!0,children:(0,s.jsx)("span",{className:"cursor-help",children:(0,s.jsx)(tS.A,{size:14})})}),(0,s.jsxs)(tw,{className:"max-w-80",children:[(0,s.jsx)("p",{children:"Repayment rates are based on the ATO's official thresholds for HELP, FEE-HELP, TSL, SSL, SFSS."}),(0,s.jsx)("p",{className:"mt-2",children:"Rates range from 1% to 10% of your income depending on your salary."}),(0,s.jsx)("a",{href:"https://www.ato.gov.au/tax-rates-and-codes/study-and-training-support-loans-rates-and-repayment-thresholds",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline mt-2 block",children:"ATO: Study and Training Support Loans rates"})]})]})})]}),a.includeStudentLoan&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground flex justify-between",children:[(0,s.jsx)("span",{children:"HELP, FEE-HELP, TSL, SSL, SFSS"}),(0,s.jsxs)("span",{children:["Current rate: ",eo()]})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eB,{checked:a.includeMedicare,onCheckedChange:e=>ec("includeMedicare",e),disabled:a.includePrivateHealth}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Medicare levy"}),(0,s.jsx)(tv,{children:(0,s.jsxs)(tb,{children:[(0,s.jsx)(tN,{asChild:!0,children:(0,s.jsx)("span",{className:"cursor-help",children:(0,s.jsx)(tS.A,{size:14})})}),(0,s.jsxs)(tw,{className:"max-w-80",children:[(0,s.jsx)("p",{children:"The Medicare levy is 2% of your taxable income, on top of the tax you pay on your taxable income."}),(0,s.jsx)("p",{className:"mt-2",children:"You may not need to pay the levy if you're a foreign resident or meet certain medical requirements."}),(0,s.jsx)("a",{href:"https://www.ato.gov.au/individuals/medicare-and-private-health-insurance/medicare-levy/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline mt-2 block",children:"ATO: Medicare levy"})]})]})})]})}),a.includeMedicare&&(0,s.jsx)("div",{className:"flex items-center justify-between pl-8",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eB,{checked:a.medicareExemption,onCheckedChange:e=>ec("medicareExemption",e)}),(0,s.jsx)("span",{className:"text-sm",children:"Medicare exemption"})]})}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eB,{checked:a.includePrivateHealth,onCheckedChange:e=>ec("includePrivateHealth",e)}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Private healthcare"}),(0,s.jsx)(tv,{children:(0,s.jsxs)(tb,{children:[(0,s.jsx)(tN,{asChild:!0,children:(0,s.jsx)("span",{className:"cursor-help",children:(0,s.jsx)(tS.A,{size:14})})}),(0,s.jsxs)(tw,{className:"max-w-80",children:[(0,s.jsx)("p",{children:"Having eligible private health insurance may exempt you from the Medicare levy surcharge."}),(0,s.jsx)("p",{className:"mt-2",children:"For simplicity, selecting this option will remove the Medicare levy from calculations."}),(0,s.jsx)("a",{href:"https://www.ato.gov.au/individuals/medicare-and-private-health-insurance/medicare-levy-surcharge/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline mt-2 block",children:"ATO: Medicare levy surcharge"})]})]})})]})}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eB,{id:"voluntary-super",checked:a.includeVoluntarySuper,onCheckedChange:e=>ec("includeVoluntarySuper",e),"aria-label":"Voluntary Superannuation"}),(0,s.jsx)(C,{htmlFor:"voluntary-super",children:"Voluntary Superannuation"})]})}),a.includeVoluntarySuper&&(0,s.jsxs)("div",{className:"pl-8 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(y,{type:"number",value:w.watch("voluntarySuper"),onChange:e=>{let t=Math.min(parseFloat(e.target.value)||0,ee);w.setValue("voluntarySuper",t.toString())},className:"w-32 h-8 text-xs",min:"0",max:ee,step:"100","aria-label":"Voluntary super contribution"}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Remaining cap: ",er(en)]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(tj,{value:[parseFloat(w.watch("voluntarySuper"))||0],max:ee,min:0,step:100,onValueChange:e=>{w.setValue("voluntarySuper",e[0].toString())},className:"w-full","aria-label":"Voluntary super contribution slider"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,s.jsx)("span",{children:er(0)}),(0,s.jsx)("span",{children:er(ee)})]})]}),ea>0&&(0,s.jsxs)("div",{className:"text-sm text-green-500 flex items-center",children:["Estimated tax savings: ",er(ea),(0,s.jsx)(tv,{children:(0,s.jsxs)(tb,{children:[(0,s.jsx)(tN,{asChild:!0,children:(0,s.jsx)("span",{className:"ml-1 cursor-help",children:(0,s.jsx)(tS.A,{size:14})})}),(0,s.jsxs)(tw,{className:"max-w-80",children:[(0,s.jsx)("p",{children:"Concessional super contributions are taxed at 15% instead of your marginal tax rate."}),(0,s.jsx)("p",{className:"mt-2",children:"This can result in significant tax savings, especially for higher income earners."}),(0,s.jsx)("a",{href:"https://www.ato.gov.au/individuals-and-families/super-for-individuals-and-families/super/growing-and-keeping-track-of-your-super/how-to-save-more-in-your-super/personal-super-contributions",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline mt-2 block",children:"ATO: Learn more about concessional contributions"})]})]})})]})]})]})]})})})]}),(0,s.jsxs)(v,{children:[(0,s.jsx)(b,{children:(0,s.jsx)(N,{children:"Summary"})}),(0,s.jsx)(S,{children:(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(c,{defaultValue:"annually",className:"w-full",children:[(0,s.jsxs)(d,{className:"grid w-full grid-cols-4",children:[(0,s.jsx)(u,{value:"weekly",children:"Weekly"}),(0,s.jsx)(u,{value:"fortnightly",children:"Fortnightly"}),(0,s.jsx)(u,{value:"monthly",children:"Monthly"}),(0,s.jsx)(u,{value:"annually",children:"Annually"})]}),ei.map(e=>(0,s.jsxs)(m,{value:e.frequency,className:"space-y-4 pt-4",children:[(0,s.jsxs)("div",{className:"bg-muted/50 p-4 rounded-lg",children:[(0,s.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Pay"}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-xl font-bold",children:er(e.grossIncome)}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:["including",a.includeSuper?" ".concat(er(e.superannuation)," super"):" no super"]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsx)("span",{children:"Base Salary"}),(0,s.jsx)("span",{className:"font-medium",children:er(e.baseSalary)})]}),e.overtime>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsx)("span",{children:"Overtime"}),(0,s.jsx)("span",{className:"font-medium",children:er(e.overtime)})]}),e.fringeBenefits>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsx)("span",{children:"Fringe Benefits"}),(0,s.jsx)("span",{className:"font-medium",children:er(e.fringeBenefits)})]}),(0,s.jsxs)("div",{className:"mt-3 pt-2 border-t",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"Gross Income"}),(0,s.jsx)("span",{className:"font-medium",children:er(e.grossIncome)})]}),e.taxDeductibleSacrifice>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsx)("span",{className:"flex items-center",children:"▼ Salary Sacrifice (Tax Deductible)"}),(0,s.jsx)("span",{className:"font-medium text-red-500",children:er(e.taxDeductibleSacrifice)})]}),a.includeVoluntarySuper&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsx)("span",{className:"flex items-center",children:"▼ Voluntary Super"}),(0,s.jsx)("span",{className:"font-medium text-red-500",children:er(e.voluntarySuper)})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm font-medium",children:[(0,s.jsx)("span",{children:"Taxable Income"}),(0,s.jsx)("span",{children:er(e.grossIncome-(e.taxDeductibleSacrifice||0)-(a.includeVoluntarySuper?e.voluntarySuper:0))})]})]}),(0,s.jsxs)("div",{className:"mt-3 pt-2 border-t",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsx)("span",{className:"flex items-center",children:"▼ Income Tax"}),(0,s.jsx)("span",{className:"font-medium text-red-500",children:er(e.tax)})]}),a.includeMedicare&&!a.medicareExemption&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsx)("span",{className:"flex items-center",children:"▼ Medicare levy (2%)"}),(0,s.jsx)("span",{className:"font-medium text-red-500",children:er(e.medicare)})]}),a.includeStudentLoan&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsxs)("span",{className:"flex items-center",children:["▼ Student loan (",eo(),")"]}),(0,s.jsx)("span",{className:"font-medium text-red-500",children:er(e.studentLoan)})]}),e.salarySacrifice-e.taxDeductibleSacrifice>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsx)("span",{className:"flex items-center",children:"▼ Salary Sacrifice (Non-Deductible)"}),(0,s.jsx)("span",{className:"font-medium text-red-500",children:er(e.salarySacrifice-e.taxDeductibleSacrifice)})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm font-medium",children:[(0,s.jsx)("span",{children:"Total Deductions"}),(0,s.jsx)("span",{className:"text-red-500",children:er(e.tax+e.medicare+e.studentLoan+(e.salarySacrifice-e.taxDeductibleSacrifice))})]})]}),(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-medium",children:"Net Income"}),(0,s.jsx)("span",{className:"font-bold",children:er(e.netIncome)})]}),W.totalSalarySacrifice>0&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"This is your cash-in-hand after tax and salary packaging deductions"})]}),W.totalSalarySacrifice>0&&(0,s.jsxs)("div",{className:"mt-3 pt-1",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-green-600",children:[(0,s.jsx)("span",{className:"font-medium",children:"Package Card Amount"}),(0,s.jsx)("span",{className:"font-medium",children:er(el(W.totalSalarySacrifice,e.frequency))})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center font-medium mt-2",children:[(0,s.jsx)("span",{children:"Total Effective Income"}),(0,s.jsx)("span",{children:er(e.netIncome+el(W.totalSalarySacrifice,e.frequency))})]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"Your total effective income includes both cash and package card amounts"})]}),(e.reportableFBT>0||e.superannuation>0)&&(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t space-y-2",children:[(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground",children:"REPORTABLE AMOUNTS"}),e.reportableFBT>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsx)("span",{children:"Reportable Fringe Benefits"}),(0,s.jsx)("span",{className:"font-medium",children:er(e.reportableFBT)})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsx)("span",{children:"Superannuation Contribution"}),(0,s.jsx)("span",{className:"font-medium",children:er(e.superannuation)})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm font-medium",children:[(0,s.jsx)("span",{children:"Total Package Value"}),(0,s.jsx)("span",{children:er(e.grossIncome+e.superannuation+e.fringeBenefits)})]})]})]},e.frequency))]})})})]})]}),(0,s.jsxs)(v,{children:[(0,s.jsx)(b,{children:(0,s.jsx)(N,{children:"Income Breakdown"})}),(0,s.jsx)(S,{children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,s.jsx)("div",{className:"w-full md:w-1/2",children:(0,s.jsx)(tx,{grossIncome:R,tax:$,medicare:K,studentLoan:Z,superannuation:X,voluntarySuper:et,overtime:H,fringeBenefits:Q.totalFBT,salarySacrifice:W.nonTaxDeductibleSacrifice})}),(0,s.jsxs)("div",{className:"w-full md:w-1/2 space-y-4",children:[(0,s.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Tax Band"}),(0,s.jsxs)("div",{className:"h-16 relative w-full bg-gray-200 rounded-md overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute inset-0 flex",children:[(0,s.jsx)("div",{className:"bg-blue-100 h-full",style:{width:"18%"},children:(0,s.jsx)("div",{className:"text-[10px] p-1",children:"0%"})}),(0,s.jsx)("div",{className:"bg-blue-200 h-full",style:{width:"27%"},children:(0,s.jsx)("div",{className:"text-[10px] p-1",children:"19%"})}),(0,s.jsx)("div",{className:"bg-blue-300 h-full",style:{width:"30%"},children:(0,s.jsx)("div",{className:"text-[10px] p-1",children:"32.5%"})}),(0,s.jsx)("div",{className:"bg-blue-400 h-full",style:{width:"15%"},children:(0,s.jsx)("div",{className:"text-[10px] p-1",children:"37%"})}),(0,s.jsx)("div",{className:"bg-blue-500 h-full",style:{width:"10%"},children:(0,s.jsx)("div",{className:"text-[10px] p-1",children:"45%"})})]}),(0,s.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between px-1 text-[10px]",children:[(0,s.jsx)("span",{children:"$0"}),(0,s.jsx)("span",{children:"$18,200"}),(0,s.jsx)("span",{children:"$45,000"}),(0,s.jsx)("span",{children:"$120,000"}),(0,s.jsx)("span",{children:"$180,000"})]})]})]}),(0,s.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Superannuation Band"}),(0,s.jsx)("div",{className:"space-y-3",children:(0,s.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,s.jsx)("span",{children:"Concessional Cap"}),(0,s.jsxs)("span",{children:["$",U>27500?"27,500":U.toFixed(0)]})]})})]}),(0,s.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Income Range"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"flex justify-between text-xs",children:(0,s.jsx)("span",{children:"70th percentile"})}),(0,s.jsx)("div",{className:"h-4 relative w-full bg-gray-200 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"absolute inset-0 flex",children:(0,s.jsx)("div",{className:"bg-emerald-500 h-full",style:{width:"".concat(R/2e5*100,"%")}})})}),(0,s.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,s.jsx)("span",{children:"less"}),(0,s.jsx)("span",{children:"more"})]})]})]})]})]})}),(0,s.jsxs)(k,{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Year-To-Date: Calculated total pay this year"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)(j,{variant:"outline",size:"sm",onClick:ex,children:[(0,s.jsx)("span",{className:"mr-2",children:"↓"})," Download"]}),(0,s.jsxs)(j,{variant:"outline",size:"sm",onClick:()=>{try{let t={salary:F,frequency:E,taxSettings:a,country:e.country},s=btoa(JSON.stringify(t)),n="".concat(window.location.origin).concat(window.location.pathname,"?calculator=").concat(s);navigator.clipboard.writeText(n),alert("Link Copied! Shareable link has been copied to clipboard")}catch(e){console.error("Error creating share link:",e),alert("Sharing Failed: There was an error creating your share link")}},children:[(0,s.jsx)("span",{className:"mr-2",children:"↗"})," Share Link"]}),(0,s.jsxs)(j,{variant:"outline",size:"sm",onClick:()=>{window.print()},children:[(0,s.jsx)("span",{className:"mr-2",children:"\uD83D\uDDA8️"})," Print"]})]})]})]})]})}var tE=a(40174),tT=a(31660);let tD=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("textarea",{className:o("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});tD.displayName="Textarea";var tP=a(53166);let tI=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(tP.bL,{ref:t,className:o("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...n})});tI.displayName=tP.bL.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(tP._V,{ref:t,className:o("aspect-square h-full w-full",a),...n})}).displayName=tP._V.displayName;let tz=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(tP.H4,{ref:t,className:o("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...n})});tz.displayName=tP.H4.displayName;var tq=a(17951),tM=a(75525),tV=a(71007),tO=a(17580),tU=a(12318),tH=a(33786);function tR(){let{user:e}=(0,tT.A)(),{groups:t,activeGroup:a,setActiveGroup:r,createGroup:l,inviteUserToGroup:i,leaveGroup:o,getUserOwedAmount:c,getUserOwesAmount:d,loading:u}=(0,tE.c)(),[m,x]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[f,g]=(0,n.useState)({name:"",description:""}),[w,k]=(0,n.useState)({email:"",role:"member"}),F=async e=>{e.preventDefault();try{await l(f.name,f.description),g({name:"",description:""}),x(!1)}catch(e){console.error("Failed to create group:",e)}},A=async e=>{if(e.preventDefault(),a)try{await i(a.id,w.email,w.role),k({email:"",role:"member"}),p(!1)}catch(e){console.error("Failed to invite user:",e)}},E=async e=>{try{await o(e),(null==a?void 0:a.id)===e&&r(null)}catch(e){console.error("Failed to leave group:",e)}},T=e=>{switch(e){case"owner":return(0,s.jsx)(tq.A,{className:"w-4 h-4 text-yellow-500"});case"admin":return(0,s.jsx)(tM.A,{className:"w-4 h-4 text-blue-500"});default:return(0,s.jsx)(tV.A,{className:"w-4 h-4 text-gray-500"})}},D=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return u?(0,s.jsx)("div",{className:"text-center p-4",children:"Loading groups..."}):(0,s.jsxs)("div",{className:"space-y-6",children:[a&&(0,s.jsxs)(v,{children:[(0,s.jsx)(b,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(N,{className:"flex items-center gap-2",children:[(0,s.jsx)(tO.A,{className:"w-5 h-5"}),a.name]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:a.description})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)(er,{open:h,onOpenChange:p,children:[(0,s.jsx)(el,{asChild:!0,children:(0,s.jsxs)(j,{variant:"outline",size:"sm",children:[(0,s.jsx)(tU.A,{className:"w-4 h-4 mr-2"}),"Invite"]})}),(0,s.jsxs)(ec,{children:[(0,s.jsx)(ed,{children:(0,s.jsxs)(em,{children:["Invite User to ",a.name]})}),(0,s.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"invite-email",children:"Email Address"}),(0,s.jsx)(y,{id:"invite-email",type:"email",value:w.email,onChange:e=>k({...w,email:e.target.value}),placeholder:"user@example.com",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"invite-role",children:"Role"}),(0,s.jsxs)(L,{value:w.role,onValueChange:e=>k({...w,role:e}),children:[(0,s.jsx)(Y,{children:(0,s.jsx)(B,{})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(G,{value:"member",children:"Member"}),(0,s.jsx)(G,{value:"admin",children:"Admin"})]})]})]}),(0,s.jsx)(j,{type:"submit",className:"w-full",children:"Send Invitation"})]})]})]})})]})}),(0,s.jsx)(S,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-sm font-medium mb-2",children:["Members (",a.members.length,")"]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:a.members.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 border rounded-lg",children:[(0,s.jsx)(tI,{className:"w-6 h-6",children:(0,s.jsx)(tz,{className:"text-xs",children:D(e.displayName)})}),(0,s.jsx)("span",{className:"text-sm",children:e.displayName}),T(e.role)]},e.userId))})]}),e&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"You are owed"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-green-600",children:["$",c(a.id,e.uid).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"You owe"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-red-600",children:["$",d(a.id,e.uid).toFixed(2)]})]})]})]})})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,s.jsxs)(er,{open:m,onOpenChange:x,children:[(0,s.jsx)(el,{asChild:!0,children:(0,s.jsx)(v,{className:"border-dashed border-2 hover:border-primary/50 transition-colors cursor-pointer",children:(0,s.jsxs)(S,{className:"flex flex-col items-center justify-center p-6 min-h-[200px]",children:[(0,s.jsx)(tk.A,{className:"w-8 h-8 text-muted-foreground mb-2"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Create New Group"})]})})}),(0,s.jsxs)(ec,{children:[(0,s.jsx)(ed,{children:(0,s.jsx)(em,{children:"Create Finance Group"})}),(0,s.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"group-name",children:"Group Name"}),(0,s.jsx)(y,{id:"group-name",value:f.name,onChange:e=>g({...f,name:e.target.value}),placeholder:"e.g., Roommates, Family Budget",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"group-description",children:"Description (Optional)"}),(0,s.jsx)(tD,{id:"group-description",value:f.description,onChange:e=>g({...f,description:e.target.value}),placeholder:"What is this group for?",rows:3})]}),(0,s.jsx)(j,{type:"submit",className:"w-full",children:"Create Group"})]})]})]}),t.map(t=>{var n;return(0,s.jsxs)(v,{className:"cursor-pointer transition-all ".concat((null==a?void 0:a.id)===t.id?"ring-2 ring-primary":"hover:shadow-md"),onClick:()=>r(t),children:[(0,s.jsx)(b,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(N,{className:"text-base",children:t.name}),t.description&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:t.description})]}),(null==a?void 0:a.id)===t.id&&(0,s.jsx)(eg,{variant:"default",className:"ml-2",children:"Active"})]})}),(0,s.jsx)(S,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Members"}),(0,s.jsx)("span",{className:"font-medium",children:t.members.length})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[t.members.slice(0,3).map(e=>(0,s.jsx)(tI,{className:"w-6 h-6",children:(0,s.jsx)(tz,{className:"text-xs",children:D(e.displayName)})},e.userId)),t.members.length>3&&(0,s.jsxs)("div",{className:"w-6 h-6 rounded-full bg-muted flex items-center justify-center text-xs",children:["+",t.members.length-3]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(j,{variant:"outline",size:"sm",className:"flex-1",onClick:e=>{e.stopPropagation(),r(t)},children:[(0,s.jsx)(tH.A,{className:"w-3 h-3 mr-1"}),"Open"]}),(null===(n=t.members.find(t=>t.userId===(null==e?void 0:e.uid)))||void 0===n?void 0:n.role)!=="owner"&&(0,s.jsx)(j,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),E(t.id)},children:"Leave"})]})]})})]},t.id)})]}),0===t.length&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(tO.A,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium",children:"No Groups Yet"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"Create your first finance group to start collaborating on expenses."}),(0,s.jsxs)(j,{onClick:()=>x(!0),children:[(0,s.jsx)(tk.A,{className:"w-4 h-4 mr-2"}),"Create First Group"]})]})]})}var tL=a(87489);function tB(e){let{className:t,orientation:a="horizontal",decorative:n=!0,...r}=e;return(0,s.jsx)(tL.b,{"data-slot":"separator-root",decorative:n,orientation:a,className:o("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...r})}var tY=a(28883);function t_(e){let{isOpen:t,onClose:a}=e,{signIn:r,signUp:l,signInWithGoogle:i}=(0,tT.A)(),[o,x]=(0,n.useState)(!1),[h,p]=(0,n.useState)(null),[f,g]=(0,n.useState)({email:"",password:""}),[v,b]=(0,n.useState)({email:"",password:"",confirmPassword:"",displayName:""}),N=async e=>{e.preventDefault(),x(!0),p(null);try{await r(f.email,f.password),a()}catch(e){p(e.message||"Failed to sign in")}finally{x(!1)}},w=async e=>{if(e.preventDefault(),x(!0),p(null),v.password!==v.confirmPassword){p("Passwords do not match"),x(!1);return}if(v.password.length<6){p("Password must be at least 6 characters"),x(!1);return}try{await l(v.email,v.password,v.displayName),a()}catch(e){p(e.message||"Failed to create account")}finally{x(!1)}},S=async()=>{x(!0),p(null);try{await i(),a()}catch(e){p(e.message||"Failed to sign in with Google")}finally{x(!1)}};return(0,s.jsx)(er,{open:t,onOpenChange:a,children:(0,s.jsxs)(ec,{className:"sm:max-w-md",children:[(0,s.jsx)(ed,{children:(0,s.jsx)(em,{children:"Welcome to PFinance"})}),(0,s.jsxs)(c,{defaultValue:"login",className:"w-full",children:[(0,s.jsxs)(d,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(u,{value:"login",children:"Sign In"}),(0,s.jsx)(u,{value:"signup",children:"Sign Up"})]}),(0,s.jsxs)(m,{value:"login",className:"space-y-4",children:[(0,s.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"login-email",children:"Email"}),(0,s.jsx)(y,{id:"login-email",type:"email",value:f.email,onChange:e=>g({...f,email:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"login-password",children:"Password"}),(0,s.jsx)(y,{id:"login-password",type:"password",value:f.password,onChange:e=>g({...f,password:e.target.value}),required:!0})]}),h&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-red-600",children:[(0,s.jsx)(e9.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:h})]}),(0,s.jsx)(j,{type:"submit",className:"w-full",disabled:o,children:o?"Signing in...":"Sign In"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)(tB,{className:"w-full"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,s.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),(0,s.jsxs)(j,{type:"button",variant:"outline",className:"w-full",onClick:S,disabled:o,children:[(0,s.jsx)(tY.A,{className:"w-4 h-4 mr-2"}),"Google"]})]}),(0,s.jsxs)(m,{value:"signup",className:"space-y-4",children:[(0,s.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"signup-name",children:"Display Name"}),(0,s.jsx)(y,{id:"signup-name",type:"text",value:v.displayName,onChange:e=>b({...v,displayName:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"signup-email",children:"Email"}),(0,s.jsx)(y,{id:"signup-email",type:"email",value:v.email,onChange:e=>b({...v,email:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"signup-password",children:"Password"}),(0,s.jsx)(y,{id:"signup-password",type:"password",value:v.password,onChange:e=>b({...v,password:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"signup-confirm",children:"Confirm Password"}),(0,s.jsx)(y,{id:"signup-confirm",type:"password",value:v.confirmPassword,onChange:e=>b({...v,confirmPassword:e.target.value}),required:!0})]}),h&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-red-600",children:[(0,s.jsx)(e9.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:h})]}),(0,s.jsx)(j,{type:"submit",className:"w-full",disabled:o,children:o?"Creating account...":"Create Account"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)(tB,{className:"w-full"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,s.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),(0,s.jsxs)(j,{type:"button",variant:"outline",className:"w-full",onClick:S,disabled:o,children:[(0,s.jsx)(tY.A,{className:"w-4 h-4 mr-2"}),"Google"]})]})]})]})})}var tG=a(91788),tW=a(55868),tJ=a(68500),t$=a(33109);function tK(){let{user:e}=(0,tT.A)(),{getTotalIncome:t,getNetIncome:a,getTotalExpenses:r,getExpenseSummary:l,incomes:i,expenses:o}=(0,h.g)(),{activeGroup:c,groupExpenses:d,getUserOwedAmount:u,getUserOwesAmount:m}=(0,tE.c)(),[x,p]=(0,n.useState)("personal"),[f,g]=(0,n.useState)("month"),[w,k]=(0,n.useState)(""),[F,A]=(0,n.useState)(""),[E,T]=(0,n.useState)("Financial Report"),[D,P]=(0,n.useState)(!1),I=(0,n.useMemo)(()=>{let e;let t=new Date,a=new Date(t);switch(f){case"week":e=new Date(t.getTime()-6048e5);break;case"month":default:e=new Date(t.getFullYear(),t.getMonth(),1);break;case"quarter":let s=3*Math.floor(t.getMonth()/3);e=new Date(t.getFullYear(),s,1);break;case"year":e=new Date(t.getFullYear(),0,1);break;case"custom":e=new Date(w||t.getTime()-2592e6),a=F?new Date(F):t}return{start:e,end:a}},[f,w,F]),z=(0,n.useMemo)(()=>{let s=t("monthly"),n=a("monthly"),h=r(),p=l(),f=i.filter(e=>e.date>=I.start&&e.date<=I.end);o.filter(e=>e.date>=I.start&&e.date<=I.end);let g={title:E,period:I,income:{total:s,breakdown:f.map(e=>({source:e.source,amount:e.amount,frequency:e.frequency}))},expenses:{total:h/12,breakdown:p},savings:{amount:n-h/12,rate:s>0?(n-h/12)/s*100:0}};return"group"===x&&c&&e&&(g.groupData={name:c.name,members:c.members.length,totalGroupExpenses:d.reduce((e,t)=>e+t.amount,0),userOwed:u(c.id,e.uid),userOwes:m(c.id,e.uid)}),g},[x,I,E,t,a,r,l,i,o,c,d,u,m,e]),q=async()=>{P(!0);try{let e=new th.uE,t=e.internal.pageSize.getWidth(),a=e.internal.pageSize.getHeight(),s=20;e.setFontSize(20),e.text(z.title,t/2,s,{align:"center"}),s+=15,e.setFontSize(12);let n="Period: ".concat(z.period.start.toLocaleDateString()," - ").concat(z.period.end.toLocaleDateString());e.text(n,t/2,s,{align:"center"}),s+=20,e.setFontSize(16),e.text("Income Summary",20,s),s+=10,e.setFontSize(12),e.text("Total Income: $".concat(z.income.total.toFixed(2)),20,s),s+=8,z.income.breakdown.length>0&&(e.text("Income Sources:",20,s),s+=5,z.income.breakdown.forEach(t=>{e.text("  • ".concat(t.source,": $").concat(t.amount.toFixed(2)," (").concat(t.frequency,")"),25,s),s+=5})),s+=10,e.setFontSize(16),e.text("Expense Summary",20,s),s+=10,e.setFontSize(12),e.text("Total Expenses: $".concat(z.expenses.total.toFixed(2)),20,s),s+=8,z.expenses.breakdown.length>0&&(e.text("Expense Categories:",20,s),s+=5,z.expenses.breakdown.forEach(t=>{e.text("  • ".concat(t.category,": $").concat(t.totalAmount.toFixed(2)," (").concat(t.percentage.toFixed(1),"%)"),25,s),s+=5})),s+=10,e.setFontSize(16),e.text("Savings Summary",20,s),s+=10,e.setFontSize(12),e.text("Net Savings: $".concat(z.savings.amount.toFixed(2)),20,s),s+=5,e.text("Savings Rate: ".concat(z.savings.rate.toFixed(1),"%"),20,s),s+=15,z.groupData&&(e.setFontSize(16),e.text("Group Summary",20,s),s+=10,e.setFontSize(12),e.text("Group: ".concat(z.groupData.name),20,s),s+=5,e.text("Members: ".concat(z.groupData.members),20,s),s+=5,e.text("Total Group Expenses: $".concat(z.groupData.totalGroupExpenses.toFixed(2)),20,s),s+=5,e.text("You are owed: $".concat(z.groupData.userOwed.toFixed(2)),20,s),s+=5,e.text("You owe: $".concat(z.groupData.userOwes.toFixed(2)),20,s)),e.setFontSize(10),e.text("Generated on ".concat(new Date().toLocaleDateString()," by PFinance"),t/2,a-10,{align:"center"});let r="financial-report-".concat(z.period.start.toISOString().slice(0,10),"-to-").concat(z.period.end.toISOString().slice(0,10),".pdf");e.save(r)}catch(e){console.error("Error generating PDF:",e)}finally{P(!1)}};return(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(v,{children:[(0,s.jsx)(b,{children:(0,s.jsxs)(N,{className:"flex items-center gap-2",children:[(0,s.jsx)(e8.A,{className:"w-5 h-5"}),"Financial Report Generator"]})}),(0,s.jsx)(S,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"report-title",children:"Report Title"}),(0,s.jsx)(y,{id:"report-title",value:E,onChange:e=>T(e.target.value),placeholder:"Monthly Financial Report"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"report-type",children:"Report Type"}),(0,s.jsxs)(L,{value:x,onValueChange:e=>p(e),children:[(0,s.jsx)(Y,{children:(0,s.jsx)(B,{})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(G,{value:"personal",children:"Personal Finance"}),(0,s.jsx)(G,{value:"group",disabled:!c,children:"Group Finance"}),(0,s.jsx)(G,{value:"comparison",children:"Comparison Report"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"report-period",children:"Time Period"}),(0,s.jsxs)(L,{value:f,onValueChange:e=>g(e),children:[(0,s.jsx)(Y,{children:(0,s.jsx)(B,{})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(G,{value:"week",children:"Last 7 Days"}),(0,s.jsx)(G,{value:"month",children:"This Month"}),(0,s.jsx)(G,{value:"quarter",children:"This Quarter"}),(0,s.jsx)(G,{value:"year",children:"This Year"}),(0,s.jsx)(G,{value:"custom",children:"Custom Range"})]})]})]}),"custom"===f&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"start-date",children:"Start Date"}),(0,s.jsx)(y,{id:"start-date",type:"date",value:w,onChange:e=>k(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"end-date",children:"End Date"}),(0,s.jsx)(y,{id:"end-date",type:"date",value:F,onChange:e=>A(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,s.jsxs)(j,{onClick:q,disabled:D,className:"flex-1",children:[(0,s.jsx)(tG.A,{className:"w-4 h-4 mr-2"}),D?"Generating...":"Download PDF"]}),(0,s.jsxs)(j,{variant:"outline",onClick:()=>{let e=[];e.push(["Financial Report",z.title]),e.push(["Period","".concat(z.period.start.toLocaleDateString()," - ").concat(z.period.end.toLocaleDateString())]),e.push([]),e.push(["INCOME SUMMARY"]),e.push(["Total Income",z.income.total.toFixed(2)]),e.push([]),e.push(["Income Sources","Amount","Frequency"]),z.income.breakdown.forEach(t=>{e.push([t.source,t.amount.toFixed(2),t.frequency])}),e.push([]),e.push(["EXPENSE SUMMARY"]),e.push(["Total Expenses",z.expenses.total.toFixed(2)]),e.push([]),e.push(["Category","Amount","Percentage"]),z.expenses.breakdown.forEach(t=>{e.push([t.category,t.totalAmount.toFixed(2),t.percentage.toFixed(1)+"%"])}),e.push([]),e.push(["SAVINGS SUMMARY"]),e.push(["Net Savings",z.savings.amount.toFixed(2)]),e.push(["Savings Rate",z.savings.rate.toFixed(1)+"%"]),z.groupData&&(e.push([]),e.push(["GROUP SUMMARY"]),e.push(["Group Name",z.groupData.name]),e.push(["Members",z.groupData.members]),e.push(["Total Group Expenses",z.groupData.totalGroupExpenses.toFixed(2)]),e.push(["You are owed",z.groupData.userOwed.toFixed(2)]),e.push(["You owe",z.groupData.userOwes.toFixed(2)]));let t=new Blob([e.map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),s=URL.createObjectURL(t);a.setAttribute("href",s),a.setAttribute("download","financial-report-".concat(z.period.start.toISOString().slice(0,10),"-to-").concat(z.period.end.toISOString().slice(0,10),".csv")),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},className:"flex-1",children:[(0,s.jsx)(e8.A,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Report Preview"}),(0,s.jsxs)("div",{className:"border rounded-lg p-4 space-y-4 bg-muted/10",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h4",{className:"text-xl font-semibold",children:z.title}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[z.period.start.toLocaleDateString()," - ",z.period.end.toLocaleDateString()]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,s.jsxs)("div",{className:"p-3 border rounded",children:[(0,s.jsx)(tW.A,{className:"w-6 h-6 mx-auto mb-1 text-green-500"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Income"}),(0,s.jsxs)("p",{className:"font-semibold",children:["$",z.income.total.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"p-3 border rounded",children:[(0,s.jsx)(tJ.A,{className:"w-6 h-6 mx-auto mb-1 text-red-500"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Expenses"}),(0,s.jsxs)("p",{className:"font-semibold",children:["$",z.expenses.total.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"p-3 border rounded",children:[(0,s.jsx)(t$.A,{className:"w-6 h-6 mx-auto mb-1 text-blue-500"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Savings"}),(0,s.jsxs)("p",{className:"font-semibold",children:["$",z.savings.amount.toFixed(2)]})]})]}),z.groupData&&(0,s.jsxs)("div",{className:"border-t pt-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(tO.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"font-medium",children:z.groupData.name})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsxs)("div",{children:["You are owed: ",(0,s.jsxs)("span",{className:"font-medium text-green-600",children:["$",z.groupData.userOwed.toFixed(2)]})]}),(0,s.jsxs)("div",{children:["You owe: ",(0,s.jsxs)("span",{className:"font-medium text-red-600",children:["$",z.groupData.userOwes.toFixed(2)]})]})]})]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground text-center",children:["Report includes ",z.income.breakdown.length," income sources and ",z.expenses.breakdown.length," expense categories"]})]})]})]})})]})})}var tZ=a(34835);function tQ(){let{user:e,logout:t,loading:a}=(0,tT.A)(),[r,l]=(0,n.useState)("salary"),[i,o]=(0,n.useState)(!1);return a?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,s.jsx)("p",{children:"Loading..."})]})}):(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Income & Expense Tracker"}),e?(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(tI,{className:"w-8 h-8",children:(0,s.jsx)(tz,{className:"text-sm",children:(e.displayName||e.email||"U").split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:e.displayName||e.email})]}),(0,s.jsxs)(j,{variant:"outline",size:"sm",onClick:t,children:[(0,s.jsx)(tZ.A,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]}):(0,s.jsx)(j,{onClick:()=>o(!0),children:"Sign In"})]}),e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(e6,{})}),(0,s.jsxs)(c,{defaultValue:"groups",className:"w-full mb-8",children:[(0,s.jsxs)(d,{className:"grid w-full grid-cols-5",children:[(0,s.jsxs)(u,{value:"groups",children:[(0,s.jsx)(tO.A,{className:"w-4 h-4 mr-2"}),"Groups"]}),(0,s.jsx)(u,{value:"income",children:"Income"}),(0,s.jsx)(u,{value:"expenses",children:"Expenses"}),(0,s.jsx)(u,{value:"reports",children:"Reports"}),(0,s.jsx)(u,{value:"settings",children:"Settings"})]}),(0,s.jsx)(m,{value:"groups",className:"mt-6",children:(0,s.jsx)(tR,{})}),(0,s.jsxs)(m,{value:"income",className:"mt-6",children:[(0,s.jsx)("div",{className:"mb-6 flex justify-center",children:(0,s.jsxs)("div",{className:"inline-flex items-center p-1 bg-muted rounded-lg",children:[(0,s.jsx)(j,{variant:"salary"===r?"default":"ghost",size:"sm",onClick:()=>l("salary"),className:"rounded-md",children:"Salary Calculator"}),(0,s.jsx)(j,{variant:"income"===r?"default":"ghost",size:"sm",onClick:()=>l("income"),className:"rounded-md",children:"Income Management"})]})}),"salary"===r?(0,s.jsx)(tA,{}):(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsx)(eG,{}),(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsx)(eJ,{})})]})]}),(0,s.jsxs)(m,{value:"expenses",className:"mt-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[(0,s.jsx)($,{}),(0,s.jsx)(eM,{})]}),(0,s.jsx)("div",{className:"mt-8 mb-8",children:(0,s.jsx)(ew,{})}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)(td,{})})]}),(0,s.jsx)(m,{value:"reports",className:"mt-6",children:(0,s.jsx)(tK,{})}),(0,s.jsx)(m,{value:"settings",className:"mt-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsx)(eZ,{}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"p-6 rounded-lg border bg-card",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Tax Configuration Help"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"Configure your tax settings to get more accurate financial calculations."}),(0,s.jsxs)("ul",{className:"space-y-2 list-disc pl-5 text-sm text-muted-foreground",children:[(0,s.jsx)("li",{children:"Set your marginal tax rate to calculate taxes on your income"}),(0,s.jsx)("li",{children:"Toggle tax calculation on/off as needed"}),(0,s.jsx)("li",{children:"Enable tax deductions if you have eligible deductions to apply"})]})]})})]})})]})]}):(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Welcome to PFinance"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-8",children:"Sign in to start tracking your finances and collaborate with others."}),(0,s.jsx)(j,{onClick:()=>o(!0),size:"lg",children:"Get Started"})]}),(0,s.jsx)(t_,{isOpen:i,onClose:()=>o(!1)})]})}},80326:(e,t,a)=>{"use strict";a.d(t,{FinanceProvider:()=>c,g:()=>d});var s=a(95155),n=a(12115),r=a(51368),l=a(75338);let i={enabled:!0,country:"simple",taxRate:20,includeDeductions:!0},o=(0,n.createContext)(void 0);function c(e){let{children:t}=e,[a,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[m,x]=(0,n.useState)(i);(0,n.useEffect)(()=>{let e=localStorage.getItem("expenses");if(e)try{let t=JSON.parse(e).map(e=>({...e,date:new Date(e.date)}));c(t)}catch(e){console.error("Failed to parse expenses from localStorage:",e)}let t=localStorage.getItem("incomes");if(t)try{let e=JSON.parse(t).map(e=>({...e,date:new Date(e.date)}));u(e)}catch(e){console.error("Failed to parse incomes from localStorage:",e)}let a=localStorage.getItem("taxConfig");if(a)try{let e=JSON.parse(a);x(e)}catch(e){console.error("Failed to parse tax config from localStorage:",e)}},[]),(0,n.useEffect)(()=>{localStorage.setItem("expenses",JSON.stringify(a))},[a]),(0,n.useEffect)(()=>{localStorage.setItem("incomes",JSON.stringify(d))},[d]),(0,n.useEffect)(()=>{localStorage.setItem("taxConfig",JSON.stringify(m))},[m]);let h=()=>a.reduce((e,t)=>e+("weekly"===t.frequency?52*t.amount:"fortnightly"===t.frequency?26*t.amount:"monthly"===t.frequency?12*t.amount:t.amount),0),p=e=>{switch(e.frequency){case"weekly":return 52*e.amount;case"fortnightly":return 26*e.amount;case"monthly":return 12*e.amount;default:return e.amount}},f=(e,t)=>{switch(t){case"weekly":return e/52;case"fortnightly":return e/26;case"monthly":return e/12;default:return e}},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"annually";return f(d.reduce((e,t)=>e+p(t),0),e)},j=e=>{if(!m.enabled||e<=0)return 0;if("simple"===m.country)return e*m.taxRate/100;let t=(0,l.PV)(m.country),a=m.customBrackets||t.brackets;return(0,l.JE)(e,a)};return(0,s.jsx)(o.Provider,{value:{expenses:a,addExpense:function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"monthly";console.log("FinanceContext: Adding single expense:",e,t,a);let n={id:(0,r.A)(),description:e,amount:t,category:a,frequency:s,date:new Date};c(e=>[...e,n])},addExpenses:e=>{console.log("FinanceContext: Adding batch of expenses:",e.length),c(t=>[...t,...e.map(e=>({id:(0,r.A)(),description:e.description,amount:e.amount,category:e.category,frequency:e.frequency||"monthly",date:new Date}))]),console.log("FinanceContext: Batch add completed")},updateExpense:(e,t,a,s,n)=>{c(r=>r.map(r=>r.id===e?{...r,description:t,amount:a,category:s,frequency:n}:r))},deleteExpense:e=>{c(t=>t.filter(t=>t.id!==e))},deleteExpenses:e=>{c(t=>t.filter(t=>!e.includes(t.id)))},getExpenseSummary:()=>{let e=h();return Object.entries(a.reduce((e,t)=>{let a="weekly"===t.frequency?52*t.amount:"fortnightly"===t.frequency?26*t.amount:"monthly"===t.frequency?12*t.amount:t.amount;return e[t.category]=(e[t.category]||0)+a,e},{})).map(t=>{let[a,s]=t;return{category:a,totalAmount:s,percentage:e>0?s/e*100:0}})},getTotalExpenses:h,incomes:d,addIncome:(e,t,a,s,n)=>{u([...d,{id:(0,r.A)(),source:e,amount:t,frequency:a,taxStatus:s,deductions:n,date:new Date}])},updateIncome:(e,t,a,s,n,r)=>{u(l=>l.map(l=>l.id===e?{...l,source:t,amount:a,frequency:s,taxStatus:n,deductions:r}:l))},deleteIncome:e=>{u(d.filter(t=>t.id!==e))},getTotalIncome:g,getNetIncome:function(){let e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"annually",s=g(a);if(!m.enabled)return s;let n=e="annually"===a?s:"monthly"===a?12*s:"fortnightly"===a?26*s:52*s;m.includeDeductions&&(n=Math.max(0,e-d.reduce((e,t)=>{let a;if(!t.deductions)return e;let s=t.deductions.filter(e=>e.isTaxDeductible).reduce((e,t)=>e+t.amount,0);return e+("annually"===t.frequency?s:"monthly"===t.frequency?12*s:"fortnightly"===t.frequency?26*s:52*s)},0)));let r=j(n);return t="annually"===a?r:"monthly"===a?r/12:"fortnightly"===a?r/26:r/52,console.log("Tax calculation:",{country:m.country,period:a,totalIncome:s,annualIncome:e,annualTaxableIncome:n,annualTax:r,periodTax:t,effectiveRate:e>0?r/e*100:0}),s-t},taxConfig:m,updateTaxConfig:e=>{console.log("Updating tax config:",e),x(t=>{let a={...t,...e};return localStorage.setItem("taxConfig",JSON.stringify(a)),a})},calculateTax:j},children:t})}function d(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useFinance must be used within a FinanceProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[930,316,992,965,412,441,684,358],()=>t(78585)),_N_E=e.O()}]);