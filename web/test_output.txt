
> pfinance@0.1.1 test
> jest

(node:98441) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:98446) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
FAIL src/app/utils/__tests__/enhancedSmartCategorization.test.ts
  ● EnhancedSmartCategorization › Constructor and Initialization › initializes with API key

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Constructor and Initialization › loads historical corrections from localStorage

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Constructor and Initialization › handles corrupted localStorage data gracefully

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Historical Learning › records user corrections

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Historical Learning › limits historical corrections to 1000 entries

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Historical Learning › provides categorization statistics

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Historical Learning › clears learning data

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Enhanced Batch Categorization › uses historical data for similar transactions

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Enhanced Batch Categorization › falls back to OpenAI when no historical data exists

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Enhanced Batch Categorization › handles OpenAI API errors gracefully

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Enhanced Batch Categorization › validates and sanitizes OpenAI responses

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Enhanced Batch Categorization › handles malformed JSON responses

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Fallback Categorization › categorizes food-related transactions

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Fallback Categorization › categorizes transportation transactions

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Fallback Categorization › defaults to Other for unrecognized transactions

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Enhanced Context Building › includes transaction metadata in prompts

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Enhanced Context Building › includes recent categorization patterns in context

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Utility Functions › validates expense categories correctly

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Utility Functions › finds common words in descriptions

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

  ● EnhancedSmartCategorization › Backward Compatibility › works with the utility function export

    TypeError: _openai.default.mockImplementation is not a function

      42 |     // Setup OpenAI mock
      43 |     mockCreate = jest.fn();
    > 44 |     (OpenAI as unknown as jest.Mock).mockImplementation(() => ({
         |                                      ^
      45 |       chat: {
      46 |         completions: {
      47 |           create: mockCreate,

      at Object.mockImplementation (src/app/utils/__tests__/enhancedSmartCategorization.test.ts:44:38)

(node:98447) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
PASS src/app/context/__tests__/AuthContext.test.tsx
  ● Console

    console.error
      An update to AuthProvider inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      68 |     return;
      69 |   }
    > 70 |   originalConsoleError(...args);
         |   ^
      71 | }; 

      at console.originalConsoleError [as error] (jest.setup.js:70:3)
      at node_modules/react-dom/cjs/react-dom-client.development.js:15751:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:543:16)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:15750:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14311:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:7208:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:7161:7)
      at setLoading (src/app/context/AuthContext.tsx:47:15)
      at callback (src/app/context/__tests__/AuthContext.test.tsx:64:7)
      at src/app/context/AuthContext.tsx:45:51

PASS src/app/context/__tests__/MultiUserFinanceContext.test.tsx
  ● Console

    console.log
      [useGroups] refreshGroups: Calling listGroups with userId: user123

      at log (src/app/context/multiuser/hooks/useGroups.ts:53:15)

    console.log
      [useGroups] refreshGroups: Got response: 1 groups

      at log (src/app/context/multiuser/hooks/useGroups.ts:58:15)

    console.log
      [useGroups] refreshGroups: Raw groups: [{"id":"group1","name":"Test Group","memberIds":["user123"]}]

      at log (src/app/context/multiuser/hooks/useGroups.ts:59:15)

    console.log
      [useGroups] refreshGroups: Calling listGroups with userId: user123

      at log (src/app/context/multiuser/hooks/useGroups.ts:53:15)

    console.log
      [useGroups] refreshGroups: Got response: 0 groups

      at log (src/app/context/multiuser/hooks/useGroups.ts:58:15)

    console.log
      [useGroups] refreshGroups: Raw groups: []

      at log (src/app/context/multiuser/hooks/useGroups.ts:59:15)

    console.log
      [useGroups] refreshGroups: Calling listGroups with userId: user123

      at log (src/app/context/multiuser/hooks/useGroups.ts:53:15)

    console.log
      [useGroups] refreshGroups: Got response: 0 groups

      at log (src/app/context/multiuser/hooks/useGroups.ts:58:15)

    console.log
      [useGroups] refreshGroups: Raw groups: []

      at log (src/app/context/multiuser/hooks/useGroups.ts:59:15)

    console.log
      [useGroups] refreshGroups: Calling listGroups with userId: user1

      at log (src/app/context/multiuser/hooks/useGroups.ts:53:15)

    console.log
      [useGroups] refreshGroups: Got response: 0 groups

      at log (src/app/context/multiuser/hooks/useGroups.ts:58:15)

    console.log
      [useGroups] refreshGroups: Raw groups: []

      at log (src/app/context/multiuser/hooks/useGroups.ts:59:15)

(node:98440) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
FAIL src/app/__tests__/integration/expense-creation.test.tsx
  ● Console

    console.error
      Firebase configuration is missing. Please check environment variables.

      68 |     return;
      69 |   }
    > 70 |   originalConsoleError(...args);
         |   ^
      71 | }; 

      at console.originalConsoleError [as error] (jest.setup.js:70:3)
      at Object.error (src/lib/firebase.ts:32:13)
      at Object.<anonymous> (src/app/context/AuthWithAdminContext.tsx:26:19)
      at Object.<anonymous> (src/app/context/FinanceContext.tsx:26:31)
      at Object.<anonymous> (src/app/components/ExpenseForm.tsx:14:25)
      at Object.<anonymous> (src/app/__tests__/integration/expense-creation.test.tsx:8:61)

  ● Personal Expense Creation › should create a personal expense and save to localStorage

    useAuth must be used within an AuthProvider

      176 |   const context = useContext(AuthContext);
      177 |   if (context === undefined) {
    > 178 |     throw new Error('useAuth must be used within an AuthProvider');
          |           ^
      179 |   }
      180 |   return context;
      181 | };

      at useAuth (src/app/context/AuthWithAdminContext.tsx:178:11)
      at FinanceProvider (src/app/context/FinanceContext.tsx:200:49)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:22428:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5757:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8018:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:9683:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:543:16)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15052:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14870:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14850:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14384:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:15931:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:180:26)
      at render (node_modules/@testing-library/react/dist/pure.js:271:10)
      at Object.<anonymous> (src/app/__tests__/integration/expense-creation.test.tsx:31:11)

  ● Personal Expense Creation › should not make API calls for personal expenses

    useAuth must be used within an AuthProvider

      176 |   const context = useContext(AuthContext);
      177 |   if (context === undefined) {
    > 178 |     throw new Error('useAuth must be used within an AuthProvider');
          |           ^
      179 |   }
      180 |   return context;
      181 | };

      at useAuth (src/app/context/AuthWithAdminContext.tsx:178:11)
      at FinanceProvider (src/app/context/FinanceContext.tsx:200:49)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:22428:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5757:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8018:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:9683:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:543:16)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15052:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14870:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14850:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14384:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:15931:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:180:26)
      at render (node_modules/@testing-library/react/dist/pure.js:271:10)
      at Object.<anonymous> (src/app/__tests__/integration/expense-creation.test.tsx:86:11)

(node:98439) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
FAIL src/app/__tests__/integration/group-expense-creation.test.tsx
  ● Console

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: true
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: true

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: true
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: true

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

  ● Group Expense Creation › should create a group expense with equal split

    TypeError: util.getModularInstance(...).setPersistence is not a function

      63 |     
      64 |     // Set persistence to local (survives browser restarts)
    > 65 |     setPersistence(auth, browserLocalPersistence)
         |                   ^
      66 |       .then(() => {
      67 |         console.log('[AuthContext] Persistence set, subscribing to auth state');
      68 |         // TypeScript needs reassurance that auth is still not null in async callback

      at setPersistence (node_modules/@firebase/auth/src/core/index.ts:67:35)
      at src/app/context/AuthWithAdminContext.tsx:65:19
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:22509:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:543:16)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:10758:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:10880:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12653:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12627:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12755:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12627:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12646:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12627:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12646:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12627:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12657:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15460:13)
      at node_modules/react-dom/cjs/react-dom-client.development.js:15324:11
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:180:26)
      at render (node_modules/@testing-library/react/dist/pure.js:271:10)
      at Object.<anonymous> (src/app/__tests__/integration/group-expense-creation.test.tsx:76:11)

  ● Group Expense Creation › should handle API errors gracefully

    TypeError: util.getModularInstance(...).setPersistence is not a function

      63 |     
      64 |     // Set persistence to local (survives browser restarts)
    > 65 |     setPersistence(auth, browserLocalPersistence)
         |                   ^
      66 |       .then(() => {
      67 |         console.log('[AuthContext] Persistence set, subscribing to auth state');
      68 |         // TypeScript needs reassurance that auth is still not null in async callback

      at setPersistence (node_modules/@firebase/auth/src/core/index.ts:67:35)
      at src/app/context/AuthWithAdminContext.tsx:65:19
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:22509:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:543:16)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:10758:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:10880:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12653:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12627:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12755:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12627:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12646:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12627:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12646:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12627:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12657:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15460:13)
      at node_modules/react-dom/cjs/react-dom-client.development.js:15324:11
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:180:26)
      at render (node_modules/@testing-library/react/dist/pure.js:271:10)
      at Object.<anonymous> (src/app/__tests__/integration/group-expense-creation.test.tsx:134:11)

(node:98445) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:98442) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:98444) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
PASS src/app/__tests__/ExpenseList.test.tsx
  ● Console

    console.error
      Firebase configuration is missing. Please check environment variables.

      68 |     return;
      69 |   }
    > 70 |   originalConsoleError(...args);
         |   ^
      71 | }; 

      at console.originalConsoleError [as error] (jest.setup.js:70:3)
      at Object.error (src/lib/firebase.ts:32:13)
      at Object.<anonymous> (src/app/context/AuthWithAdminContext.tsx:26:19)
      at Object.<anonymous> (src/app/context/FinanceContext.tsx:26:31)
      at requireActual (src/app/__tests__/ExpenseList.test.tsx:20:31)
      at Object.<anonymous> (src/app/components/ExpenseList.tsx:14:25)
      at Object.<anonymous> (src/app/__tests__/ExpenseList.test.tsx:76:61)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at log (src/app/context/FinanceContext.tsx:377:13)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at log (src/app/context/FinanceContext.tsx:280:13)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at log (src/app/context/FinanceContext.tsx:353:15)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at log (src/app/context/AuthWithAdminContext.tsx:57:15)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect cleanup

      at log (src/app/context/FinanceContext.tsx:388:15)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at log (src/app/context/FinanceContext.tsx:372:15)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at log (src/app/context/FinanceContext.tsx:377:13)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at log (src/app/context/FinanceContext.tsx:280:13)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at log (src/app/context/FinanceContext.tsx:353:15)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at log (src/app/context/AuthWithAdminContext.tsx:57:15)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect cleanup

      at log (src/app/context/FinanceContext.tsx:388:15)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at log (src/app/context/FinanceContext.tsx:372:15)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at log (src/app/context/FinanceContext.tsx:377:13)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at log (src/app/context/FinanceContext.tsx:280:13)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at log (src/app/context/FinanceContext.tsx:353:15)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at log (src/app/context/AuthWithAdminContext.tsx:57:15)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect cleanup

      at log (src/app/context/FinanceContext.tsx:388:15)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at log (src/app/context/FinanceContext.tsx:372:15)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at log (src/app/context/FinanceContext.tsx:377:13)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at log (src/app/context/FinanceContext.tsx:280:13)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at log (src/app/context/FinanceContext.tsx:353:15)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at log (src/app/context/AuthWithAdminContext.tsx:57:15)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect cleanup

      at log (src/app/context/FinanceContext.tsx:388:15)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at log (src/app/context/FinanceContext.tsx:372:15)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at log (src/app/context/FinanceContext.tsx:377:13)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at log (src/app/context/FinanceContext.tsx:280:13)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at log (src/app/context/FinanceContext.tsx:353:15)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at log (src/app/context/AuthWithAdminContext.tsx:57:15)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect cleanup

      at log (src/app/context/FinanceContext.tsx:388:15)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at log (src/app/context/FinanceContext.tsx:372:15)

PASS src/app/components/__tests__/TransactionImport.test.tsx
  ● Console

    console.error
      Firebase configuration is missing. Please check environment variables.

      68 |     return;
      69 |   }
    > 70 |   originalConsoleError(...args);
         |   ^
      71 | }; 

      at console.originalConsoleError [as error] (jest.setup.js:70:3)
      at Object.error (src/lib/firebase.ts:32:13)
      at Object.<anonymous> (src/app/context/AuthWithAdminContext.tsx:26:19)
      at Object.<anonymous> (src/app/context/FinanceContext.tsx:26:31)
      at Object.<anonymous> (src/app/components/TransactionImport.tsx:14:25)
      at Object.<anonymous> (src/app/components/__tests__/TransactionImport.test.tsx:10:67)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      Toggling PDF processing from false to true

      at Object.log [as current] (src/app/components/TransactionImport.tsx:468:13)

    console.log
      PDF processing setting saved to localStorage: true

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,.pdf,application/pdf,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      Toggling PDF processing from false to true

      at Object.log [as current] (src/app/components/TransactionImport.tsx:468:13)

    console.log
      PDF processing setting saved to localStorage: true

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,.pdf,application/pdf,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      Toggling PDF processing from false to true

      at Object.log [as current] (src/app/components/TransactionImport.tsx:468:13)

    console.log
      PDF processing setting saved to localStorage: true

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,.pdf,application/pdf,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      Toggling PDF processing from false to true

      at Object.log [as current] (src/app/components/TransactionImport.tsx:468:13)

    console.log
      PDF processing setting saved to localStorage: true

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,.pdf,application/pdf,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      File selected via input, PDF processing enabled: false

      at log (src/app/components/TransactionImport.tsx:242:13)

    console.log
      Processing file: test.pdf Type: application/pdf

      at log (src/app/components/TransactionImport.tsx:170:13)

    console.log
      PDF processing enabled state: false

      at log (src/app/components/TransactionImport.tsx:171:13)

    console.log
      File type detection - isPDF: true isCSV: false fileType: application/pdf fileName: test.pdf

      at log (src/app/components/TransactionImport.tsx:180:13)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      File selected via input, PDF processing enabled: false

      at log (src/app/components/TransactionImport.tsx:242:13)

    console.log
      Processing file: test.csv Type: text/csv

      at log (src/app/components/TransactionImport.tsx:170:13)

    console.log
      PDF processing enabled state: false

      at log (src/app/components/TransactionImport.tsx:171:13)

    console.log
      File type detection - isPDF: false isCSV: true fileType: text/csv fileName: test.csv

      at log (src/app/components/TransactionImport.tsx:180:13)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      Toggling PDF processing from false to true

      at Object.log [as current] (src/app/components/TransactionImport.tsx:468:13)

    console.log
      PDF processing setting saved to localStorage: true

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,.pdf,application/pdf,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      File selected via input, PDF processing enabled: false

      at log (src/app/components/TransactionImport.tsx:242:13)

    console.log
      Processing file: test.txt Type: text/plain

      at log (src/app/components/TransactionImport.tsx:170:13)

    console.log
      PDF processing enabled state: false

      at log (src/app/components/TransactionImport.tsx:171:13)

    console.log
      File type detection - isPDF: false isCSV: false fileType: text/plain fileName: test.txt

      at log (src/app/components/TransactionImport.tsx:180:13)

    console.log
      PDF processing setting saved to localStorage: false

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      TransactionImport mounted, checking context

      at log (src/app/components/TransactionImport.tsx:574:13)

    console.log
      addExpense function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:575:13)

    console.log
      addExpenses function from context: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }

      at log (src/app/components/TransactionImport.tsx:576:13)

    console.log
      addExpense appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:580:15)

    console.log
      addExpenses (batch) appears to be a valid function

      at log (src/app/components/TransactionImport.tsx:586:15)

    console.log
      Toggling PDF processing from false to true

      at Object.log [as current] (src/app/components/TransactionImport.tsx:468:13)

    console.log
      PDF processing setting saved to localStorage: true

      at log (src/app/components/TransactionImport.tsx:149:13)

    console.log
      Updated file input accept attribute: .csv,.pdf,application/pdf,text/csv

      at log (src/app/components/TransactionImport.tsx:156:15)

    console.log
      File selected via input, PDF processing enabled: true

      at log (src/app/components/TransactionImport.tsx:242:13)

    console.log
      Processing file: test.txt Type: text/plain

      at log (src/app/components/TransactionImport.tsx:170:13)

    console.log
      PDF processing enabled state: true

      at log (src/app/components/TransactionImport.tsx:171:13)

    console.log
      File type detection - isPDF: false isCSV: false fileType: text/plain fileName: test.txt

      at log (src/app/components/TransactionImport.tsx:180:13)

(node:98443) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
PASS src/app/components/__tests__/SalaryCalculator.test.tsx
  ● Console

    console.error
      Firebase configuration is missing. Please check environment variables.

      68 |     return;
      69 |   }
    > 70 |   originalConsoleError(...args);
         |   ^
      71 | }; 

      at console.originalConsoleError [as error] (jest.setup.js:70:3)
      at Object.error (src/lib/firebase.ts:32:13)
      at Object.<anonymous> (src/app/context/AuthWithAdminContext.tsx:26:19)
      at Object.<anonymous> (src/app/context/FinanceContext.tsx:26:31)
      at Object.<anonymous> (src/app/components/SalaryCalculator.tsx:15:25)
      at Object.<anonymous> (src/app/components/__tests__/SalaryCalculator.test.tsx:7:27)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at log (src/app/context/FinanceContext.tsx:377:13)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at log (src/app/context/FinanceContext.tsx:280:13)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at log (src/app/context/FinanceContext.tsx:353:15)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at log (src/app/context/AuthWithAdminContext.tsx:57:15)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect cleanup

      at log (src/app/context/FinanceContext.tsx:388:15)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at log (src/app/context/FinanceContext.tsx:372:15)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at log (src/app/context/FinanceContext.tsx:377:13)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at log (src/app/context/FinanceContext.tsx:280:13)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at log (src/app/context/FinanceContext.tsx:353:15)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at log (src/app/context/AuthWithAdminContext.tsx:57:15)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect cleanup

      at log (src/app/context/FinanceContext.tsx:388:15)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at log (src/app/context/FinanceContext.tsx:372:15)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at log (src/app/context/FinanceContext.tsx:377:13)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at log (src/app/context/FinanceContext.tsx:280:13)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at log (src/app/context/FinanceContext.tsx:353:15)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at log (src/app/context/AuthWithAdminContext.tsx:57:15)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect cleanup

      at log (src/app/context/FinanceContext.tsx:388:15)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at log (src/app/context/FinanceContext.tsx:372:15)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at log (src/app/context/FinanceContext.tsx:377:13)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at log (src/app/context/FinanceContext.tsx:280:13)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at log (src/app/context/FinanceContext.tsx:353:15)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at log (src/app/context/AuthWithAdminContext.tsx:57:15)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect cleanup

      at log (src/app/context/FinanceContext.tsx:388:15)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at log (src/app/context/FinanceContext.tsx:372:15)

PASS src/app/__tests__/ExpenseListSelection.test.tsx
  ● Console

    console.error
      Firebase configuration is missing. Please check environment variables.

      68 |     return;
      69 |   }
    > 70 |   originalConsoleError(...args);
         |   ^
      71 | }; 

      at console.originalConsoleError [as error] (jest.setup.js:70:3)
      at Object.error (src/lib/firebase.ts:32:13)
      at Object.<anonymous> (src/app/context/AuthWithAdminContext.tsx:26:19)
      at Object.<anonymous> (src/app/context/FinanceContext.tsx:26:31)
      at requireActual (src/app/__tests__/ExpenseListSelection.test.tsx:83:31)
      at Object.<anonymous> (src/app/components/ExpenseList.tsx:14:25)
      at Object.<anonymous> (src/app/__tests__/ExpenseListSelection.test.tsx:59:61)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect cleanup

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect cleanup

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect cleanup

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect cleanup

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect cleanup

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect cleanup

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect cleanup

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect cleanup

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect cleanup

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect cleanup

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect cleanup

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at log (src/app/context/FinanceContext.tsx:377:13)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at log (src/app/context/FinanceContext.tsx:280:13)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at log (src/app/context/FinanceContext.tsx:353:15)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at log (src/app/context/AuthWithAdminContext.tsx:57:15)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect cleanup

      at log (src/app/context/FinanceContext.tsx:388:15)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at log (src/app/context/FinanceContext.tsx:372:15)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at log (src/app/context/FinanceContext.tsx:377:13)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at log (src/app/context/FinanceContext.tsx:280:13)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at log (src/app/context/FinanceContext.tsx:353:15)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at log (src/app/context/AuthWithAdminContext.tsx:57:15)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect cleanup

      at log (src/app/context/FinanceContext.tsx:388:15)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at log (src/app/context/FinanceContext.tsx:372:15)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at log (src/app/context/FinanceContext.tsx:377:13)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at log (src/app/context/FinanceContext.tsx:280:13)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at log (src/app/context/FinanceContext.tsx:353:15)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at log (src/app/context/AuthWithAdminContext.tsx:57:15)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect cleanup

      at log (src/app/context/FinanceContext.tsx:388:15)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at log (src/app/context/FinanceContext.tsx:372:15)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at log (src/app/context/FinanceContext.tsx:377:13)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at log (src/app/context/FinanceContext.tsx:280:13)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at log (src/app/context/FinanceContext.tsx:353:15)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at log (src/app/context/AuthWithAdminContext.tsx:57:15)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect cleanup

      at log (src/app/context/FinanceContext.tsx:388:15)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at log (src/app/context/FinanceContext.tsx:372:15)

    console.log
      [AuthContext] State: {
        loading: true,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: true,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: false,
        loading: true,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: false,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect - loading data for user:

      at log (src/app/context/FinanceContext.tsx:377:13)

    console.log
      [FinanceContext] loadData called { isLoadingRef: false, shouldUseApi: false, userId: '' }

      at log (src/app/context/FinanceContext.tsx:280:13)

    console.log
      [FinanceContext] Loading from localStorage (no API/user)

      at log (src/app/context/FinanceContext.tsx:353:15)

    console.log
      [AuthContext] useEffect - setting up auth listener, auth initialized: false

      at log (src/app/context/AuthWithAdminContext.tsx:53:13)

    console.log
      [AuthContext] Firebase not initialized, setting loading=false

      at log (src/app/context/AuthWithAdminContext.tsx:57:15)

    console.log
      [AuthContext] State: {
        loading: false,
        actualUser: null,
        effectiveUser: null,
        isAdminMode: false,
        hasImpersonatedUser: false,
        authInitialized: false
      }

      at log (src/app/context/AuthWithAdminContext.tsx:43:11)

    console.log
      [FinanceContext] State: {
        authLoading: false,
        user: null,
        isDevMode: false,
        useApi: false,
        effectiveUserId: '',
        dataLoaded: true,
        loading: false,
        expensesCount: 0,
        incomesCount: 0
      }

      at log (src/app/context/FinanceContext.tsx:228:11)

    console.log
      [FinanceContext] useEffect cleanup

      at log (src/app/context/FinanceContext.tsx:388:15)

    console.log
      [FinanceContext] useEffect triggered {
        effectiveUserId: '',
        useApi: false,
        lastUserIdRef: '',
        dataLoaded: true,
        isLoadingRef: false
      }

      at log (src/app/context/FinanceContext.tsx:362:13)

    console.log
      [FinanceContext] useEffect skipped - same user and data loaded

      at log (src/app/context/FinanceContext.tsx:372:15)


Test Suites: 3 failed, 6 passed, 9 total
Tests:       24 failed, 63 passed, 87 total
Snapshots:   0 total
Time:        2.962 s
Ran all test suites.
