#!/bin/bash

# Pre-commit hook for PFinance
# Runs all checks before allowing a commit

echo "üîç Running pre-commit checks..."
echo "-------------------------------"

# Run linting and unit tests
# We use the Makefile targets to ensure consistency
make test

RESULT=$?

echo "-------------------------------"
if [ $RESULT -ne 0 ]; then
  echo "‚ùå Pre-commit checks failed!"
  echo "Please fix the issues above or commit with --no-verify if absolutely necessary."
  exit 1
fi

echo "‚úÖ Pre-commit checks passed!"
exit 0
